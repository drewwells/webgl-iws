function h(a){throw a;}var j=void 0,n=null;function o(a){return function(){return this[a]}}function aa(a){return function(){return a}}var p,q=this;function t(){}
function ba(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function u(a){return a!==j}function v(a){return a===n}function w(a){return a!=n}function ca(a){return ba(a)=="array"}function x(a){var b=ba(a);return b=="array"||b=="object"&&typeof a.length=="number"}function y(a){return typeof a=="string"}function da(a){return typeof a=="number"}function ea(a){return ba(a)=="function"}function fa(a){a=ba(a);return a=="object"||a=="array"||a=="function"}
function z(a){return a[ga]||(a[ga]=++ia)}var ga="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ia=0;function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){a||h(Error());if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}else return function(){return a.apply(b,arguments)}}
function A(a,b,c){A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ja:ka;return A.apply(n,arguments)}var B=Date.now||function(){return+new Date};function C(a,b){var c=a.split("."),d=q;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&u(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function D(a,b){function c(){}c.prototype=b.prototype;a.G=b.prototype;a.prototype=new c};function la(a){if(!ma.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(na,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(oa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(pa,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(qa,"&quot;"));return a}var na=/&/g,oa=/</g,pa=/>/g,qa=/\"/g,ma=/[&<>\"]/;function ra(){return Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^B()).toString(36)}
function sa(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var i=d[g]||"",k=e[g]||"",l=RegExp("(\\d*)(\\D*)","g"),r=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(i)||["","",""],E=r.exec(k)||["","",""];if(m[0].length==0&&E[0].length==0)break;c=ta(m[1].length==0?0:parseInt(m[1],10),E[1].length==0?0:parseInt(E[1],10))||ta(m[2].length==0,E[2].length==0)||ta(m[2],E[2])}while(c==
0)}return c}function ta(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};var F=Array.prototype,ua=F.indexOf?function(a,b,c){return F.indexOf.call(a,b,c)}:function(a,b,c){c=c==n?0:c<0?Math.max(0,a.length+c):c;if(y(a))return!y(b)||b.length!=1?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},G=F.forEach?function(a,b,c){F.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},va=F.filter?function(a,b,c){return F.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=y(a)?a.split(""):
a,i=0;i<d;i++)if(i in g){var k=g[i];b.call(c,k,i,a)&&(e[f++]=k)}return e},wa=F.every?function(a,b,c){return F.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=y(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function xa(a,b){var c=ua(a,b),d;(d=c>=0)&&F.splice.call(a,c,1);return d}function ya(a){return F.concat.apply(F,arguments)}function za(a){if(ca(a))return ya(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}
function Aa(a,b,c){return arguments.length<=2?F.slice.call(a,b):F.slice.call(a,b,c)}function Ba(a,b){F.sort.call(a,b||Ca)}function Ca(a,b){return a>b?1:a<b?-1:0}function Da(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];ca(d)?b.push.apply(b,Da.apply(n,d)):b.push(d)}return b};function H(a,b,c){return Math.min(Math.max(a,b),c)}function I(a,b){var c=a%b;return c*b<0?c+b:c}function J(a){return a*Math.PI/180}function K(a){return a*180/Math.PI};function Ea(a){var b=u(j),c=new XMLHttpRequest;if(b)c.onreadystatechange=function(){c.readyState==4&&j(c.responseText)};c.open("GET",a,b);c.send(n);return b?"":c.responseText}function Fa(a){a=I(a,2*Math.PI);return a>Math.PI?a-2*Math.PI:a}function Ga(a){var b=document.createElement("style");b.type="text/css";b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));Ha()[0].appendChild(b)};function Ia(a,b){var c;c=(c=a.className)&&typeof c.split=="function"?c.split(/\s+/):[];var d=Aa(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)ua(e,d[g])>=0||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};function Ja(a,b){for(var c in a)b.call(j,a[c],c,a)}function Ka(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function La(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ma(){var a=Na,b;for(b in a)return!1;return!0}var Oa="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
function Pa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Oa.length;f++)c=Oa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Qa,Ra,Sa,Ta,Ua;function Wa(){return q.navigator?q.navigator.userAgent:n}Ta=Sa=Ra=Qa=!1;var Xa;if(Xa=Wa()){var Ya=q.navigator;Qa=Xa.indexOf("Opera")==0;Ra=!Qa&&Xa.indexOf("MSIE")!=-1;Sa=!Qa&&Xa.indexOf("WebKit")!=-1;Ta=!Qa&&!Sa&&Ya.product=="Gecko"}var Za=Qa,L=Ra,$a=Ta,ab=Sa,bb,cb=q.navigator;bb=cb&&cb.platform||"";Ua=bb.indexOf("Mac")!=-1;var db=bb.indexOf("Win")!=-1,eb;
a:{var fb="",gb;if(Za&&q.opera)var hb=q.opera.version,fb=typeof hb=="function"?hb():hb;else if($a?gb=/rv\:([^\);]+)(\)|;)/:L?gb=/MSIE\s+([^\);]+)(\)|;)/:ab&&(gb=/WebKit\/(\S+)/),gb)var ib=gb.exec(Wa()),fb=ib?ib[1]:"";if(L){var jb,kb=q.document;jb=kb?kb.documentMode:j;if(jb>parseFloat(fb)){eb=String(jb);break a}}eb=fb}var lb={};function mb(a){return lb[a]||(lb[a]=sa(eb,a)>=0)}var nb={};function ob(){return nb[9]||(nb[9]=L&&document.documentMode&&document.documentMode>=9)};function pb(a,b){this.width=a;this.height=b}function qb(a,b){return a==b?!0:!a||!b?!1:a.width==b.width&&a.height==b.height}p=pb.prototype;p.La=function(){return new pb(this.width,this.height)};p.Ua=function(){return this.width/this.height};p.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};p.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
p.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};p.scale=function(a){this.width*=a;this.height*=a;return this};var rb=!L||ob();!$a&&!L||L&&ob()||$a&&mb("1.9.1");L&&mb("9");function Ha(){var a=document;return a.querySelectorAll&&a.querySelector&&(!ab||document.compatMode=="CSS1Compat"||mb("528"))?a.querySelectorAll("HEAD"):a.getElementsByTagName("HEAD")}function sb(a,b){Ja(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in tb?a.setAttribute(tb[d],b):d.lastIndexOf("aria-",0)==0?a.setAttribute(d,b):a[d]=b})}
var tb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function M(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!rb&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',la(g.name),'"');if(g.type){f.push(' type="',la(g.type),'"');var i={};Pa(i,g);g=i;delete g.type}f.push(">");f=f.join("")}f=e.createElement(f);if(g)y(g)?f.className=g:ca(g)?Ia.apply(n,[f].concat(g)):sb(f,g);d.length>2&&ub(e,f,d,2);return f}
function ub(a,b,c,d){function e(c){c&&b.appendChild(y(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];x(f)&&!(fa(f)&&f.nodeType>0)?G(vb(f)?za(f):f,e):e(f)}}function N(a,b){ub(wb(a),a,arguments,1)}function wb(a){return a.nodeType==9?a:a.ownerDocument||a.document}function vb(a){if(a&&typeof a.length=="number")if(fa(a))return typeof a.item=="function"||typeof a.item=="string";else if(ea(a))return typeof a.item=="function";return!1};function xb(a,b,c){var d=M("div",{"class":"we-pp-content"});d.innerHTML=a;a=M("div",{"class":"we-pp-wrapper"},d);d=M("div",{"class":"we-pp-tip-cont"},M("div",{"class":"we-pp-tip"}));this.t=M("div",{"class":"we-pp"});if(c!==!1)c=M("a",{"class":"we-pp-close",href:"#"}),c.onclick=A(this.show,this,!1),this.t.appendChild(c);this.t.appendChild(a);this.t.appendChild(d);b=b||300;this.t.style.width=b.toFixed(0)+"px";this.t.style.left=(-b/2).toFixed(0)+"px";this.show(!1)}
xb.prototype.show=function(a){a?(this.t.style.opacity=1,this.t.style.visibility="visible"):(this.t.style.opacity=0,this.t.style.visibility="hidden")};Ga('.we-pp-content p{margin:18px 0;text-align:justify;}.we-pp-wrapper{padding:1px;text-align:left;border-radius:20px;}.we-pp{z-index:100;-webkit-transition:opacity 0.2s linear;-moz-transition:opacity 0.2s linear;-o-transition:opacity 0.2s linear;transition:opacity 0.2s linear;position:absolute;}.we-pp-wrapper,.we-pp-tip{background:white;box-shadow:0 1px 10px #888;-moz-box-shadow:0 1px 10px #888;-webkit-box-shadow:0 1px 14px #999;}.we-pp-close{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAk1BMVEX////Ny8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8vNy8sw0horAAAAMHRSTlMA/bGBFK1LgjellwUx2+VZo73SE6z5fQYOtzLRpxI22CC4g6ieV+yAEc8/ZocEHTzU+GNbAAAAV0lEQVQI1wXBBQKDMADAwLRl7szdgCks/3/d7hh0ehl0W21IwZgNR44nTNVZribmC1WXqzVstmpIALu9Gg5HOJ1VNV64arjd1YKy8sEz+nrD51tD0//xB/w6CnrIHetcAAAAAElFTkSuQmCC);position:absolute;top:9px;right:9px;width:10px;height:10px;overflow:hidden;}.we-pp-content{display:inline-block;margin:19px;font:12px/1.4 "Helvetica Neue",Arial,Helvetica,sans-serif;}.we-pp-tip-cont{margin:0 auto;width:40px;height:16px;position:relative;overflow:hidden;}.we-pp-tip{width:15px;height:15px;padding:1px;margin:-8px auto 0;-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg);}');function yb(a){return function(){return a}}var zb=yb(!0),Ab=yb(n);function Bb(a){var b=arguments,c=b.length;return function(){for(var a,e=0;e<c;e++)a=b[e].apply(this,arguments);return a}};function O(){}O.prototype.Kc=!1;O.prototype.n=function(){if(!this.Kc)this.Kc=!0,this.q()};O.prototype.q=function(){this.Fd&&Cb.apply(n,this.Fd)};function Cb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];x(d)?Cb.apply(n,d):d&&typeof d.n=="function"&&d.n()}};function Db(a,b,c,d){this.zoom=a||0;this.x=b||0;this.y=c||0;this.Tb=0;this.ra=d||0;this.Na=this.Aa=n;this.state=Eb}D(Db,O);Db.prototype.setData=function(a){this.Na=a};Db.prototype.Gc=Ab;function Fb(a){return a.Na?a.Gc(a.Na):a.Aa}Db.prototype.Ec=t;Db.prototype.q=function(){this.Aa=n;if(this.Na)this.Ec(this.Na),this.Na=n};var Eb=0;function Gb(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Gb.prototype.La=function(){return new Gb(this.top,this.right,this.bottom,this.left)};Gb.prototype.contains=function(a){return!this||!a?!1:a instanceof Gb?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Hb(a){if(typeof a.fa=="function")a=a.fa();else if(x(a)||y(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Ib(a){if(typeof a.qa=="function")return a.qa();if(y(a))return a.split("");if(x(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ka(a)}function Jb(a){if(typeof a.qb=="function")return a.qb();if(typeof a.qa!="function"){if(x(a)||y(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return La(a)}}
function Kb(a,b){if(typeof a.forEach=="function")a.forEach(b,j);else if(x(a)||y(a))G(a,b,j);else for(var c=Jb(a),d=Ib(a),e=d.length,f=0;f<e;f++)b.call(j,d[f],c&&c[f],a)}function Lb(a,b){if(typeof a.every=="function")return a.every(b,j);if(x(a)||y(a))return wa(a,b,j);for(var c=Jb(a),d=Ib(a),e=d.length,f=0;f<e;f++)if(!b.call(j,d[f],c&&c[f],a))return!1;return!0};function Mb(a,b){this.s={};this.l=[];var c=arguments.length;if(c>1){c%2&&h(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Kb(a)}p=Mb.prototype;p.p=0;p.xc=0;p.fa=o("p");p.qa=function(){Nb(this);for(var a=[],b=0;b<this.l.length;b++)a.push(this.s[this.l[b]]);return a};p.qb=function(){Nb(this);return this.l.concat()};p.Dc=function(a){for(var b=0;b<this.l.length;b++){var c=this.l[b];if(Ob(this.s,c)&&this.s[c]==a)return!0}return!1};
p.equals=function(a,b){if(this===a)return!0;if(this.p!=a.fa())return!1;var c=b||Pb;Nb(this);for(var d,e=0;d=this.l[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Pb(a,b){return a===b}p.clear=function(){this.s={};this.xc=this.p=this.l.length=0};p.remove=function(a){return Ob(this.s,a)?(delete this.s[a],this.p--,this.xc++,this.l.length>2*this.p&&Nb(this),!0):!1};
function Nb(a){if(a.p!=a.l.length){for(var b=0,c=0;b<a.l.length;){var d=a.l[b];Ob(a.s,d)&&(a.l[c++]=d);b++}a.l.length=c}if(a.p!=a.l.length){for(var e={},c=b=0;b<a.l.length;)d=a.l[b],Ob(e,d)||(a.l[c++]=d,e[d]=1),b++;a.l.length=c}}p.get=function(a,b){return Ob(this.s,a)?this.s[a]:b};p.set=function(a,b){Ob(this.s,a)||(this.p++,this.l.push(a),this.xc++);this.s[a]=b};p.Kb=function(a){var b;a instanceof Mb?(b=a.qb(),a=a.qa()):(b=La(a),a=Ka(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};p.La=function(){return new Mb(this)};
function Ob(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Qb(a){this.s=new Mb;a&&this.Kb(a)}function Rb(a){var b=typeof a;return b=="object"&&a||b=="function"?"o"+z(a):b.substr(0,1)+a}p=Qb.prototype;p.fa=function(){return this.s.fa()};p.add=function(a){this.s.set(Rb(a),a)};p.Kb=function(a){for(var a=Ib(a),b=a.length,c=0;c<b;c++)this.add(a[c])};p.qc=function(a){for(var a=Ib(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};p.remove=function(a){return this.s.remove(Rb(a))};p.clear=function(){this.s.clear()};
p.contains=function(a){a=Rb(a);return Ob(this.s.s,a)};p.qa=function(){return this.s.qa()};p.La=function(){return new Qb(this)};p.equals=function(a){return this.fa()==Hb(a)&&Sb(this,a)};function Sb(a,b){var c=Hb(b);if(a.fa()>c)return!1;!(b instanceof Qb)&&c>5&&(b=new Qb(b));return Lb(a,function(a){if(typeof b.contains=="function")a=b.contains(a);else if(typeof b.Dc=="function")a=b.Dc(a);else if(x(b)||y(b))a=ua(b,a)>=0;else a:{for(var c in b)if(b[c]==a){a=!0;break a}a=!1}return a})};function Tb(a){this.name=a;this.T=0;this.Pb=[];this.Zc=-1.4844222297453324;this.Xc=1.4844222297453324;this.$c=-Math.PI;this.Yc=Math.PI;this.mb=[];this.opacity=1}p=Tb.prototype;p.rc=function(a,b,c,d){this.Zc=J(a);this.Xc=J(b);this.$c=J(c);this.Yc=J(d);this.mb=[]};
function Ub(a,b){if(!w(a.mb[b])){var c=1<<b,d=Math.floor((a.$c/(2*Math.PI)+0.5)*c),e=Math.floor((a.Yc/(2*Math.PI)+0.5)*c),f=Math.floor((0.5-Vb(a.Xc)/(Math.PI*2))*c),c=Math.floor((0.5-Vb(a.Zc)/(Math.PI*2))*c);a.mb[b]=new Gb(f,e,c,d)}return a.mb[b]}p.ya=aa(0);p.Mb=aa(!1);p.sc=aa(!1);p.Zb=aa(!0);function Wb(a){G(a.Pb,function(a){this.T--;this.Za(a.Ae,a.onload,a.oe)},a);a.Pb=[]}function Xb(a,b,c,d){a.Zb()?a.Za(b,c,d):(a.Pb.push(new Yb(b,c,d)),a.T++)}p.ta=function(){};p.rb=aa(n);p.gd=t;p.Ob=t;
function Zb(a,b,c,d,e){this.Ad=a;this.Bd=b;this.we=c;this.xe=d;this.He=e}function Yb(a,b,c){this.Ae=a;this.onload=b;this.oe=c};function P(a){Tb.call(this,a);this.pc=""}D(P,Tb);P.prototype.Mb=aa(!0);P.prototype.sc=function(a){var b=this.pc!=a;this.pc=a;return b};P.prototype.Za=function(a,b,c){var d=new Image;d.onload=A(function(){a.state=20;this.T--;b(a)},this);d.onerror=A(function(){a.Tb++;a.state=-10;this.T--;c&&c(a)},this);a.state=10;a.Aa=d;d.crossOrigin="";var e=this.Xb(a.zoom,a.x,a.y);d.src=this.pc+e;this.T++};function $b(a,b,c,d,e,f,g,i){P.call(this,a);this.url=b;this.minZoom=c;this.maxZoom=d;this.tileSize=e;this.Jd=f===!0;this.tc=g||[];this.copyright=i||""}D($b,P);p=$b.prototype;p.ya=o("minZoom");p.oa=o("maxZoom");p.pa=o("tileSize");p.Xb=function(a,b,c){var d=this.url.replace("{z}",a.toFixed(0)),d=d.replace("{x}",b.toFixed(0)),d=d.replace("{y}",(this.Jd?(1<<a)-c-1:c).toFixed(0));this.tc.length>0&&(d=d.replace("{sub}",this.tc[I(b+c+a,this.tc.length)]));return d};
p.ta=function(a){this.copyright.length>0&&N(a,this.copyright)};function ac(a,b,c,d,e,f,g,i,k,l){P.call(this,a);b.charAt(b.length-1)!="?"&&(b+="?");this.Jb=0;if(b.length>0)this.url=b,this.Jb=1;this.version=c;this.Qd=d;this.format=f;this.minZoom=k;this.maxZoom=l;this.tileSize=256;e=="EPSG:900913"||e=="EPSG:3857"?this.ld=e:(this.Jb=0,h(Error(e+" is an unsupported CRS, please use either EPSG:900913 or EPSG:3857.  WMS Server must support one of these.")));this.styles=g;i.length>0&&i.charAt(0)!="&"&&(i="&"+i);this.Id=i}D(ac,P);ac.prototype.ya=o("minZoom");
ac.prototype.oa=o("maxZoom");ac.prototype.pa=aa(256);
ac.prototype.Xb=function(a,b,c){function d(a,b){var c=Math.PI-2*Math.PI*a/Math.pow(2,b);return 180/Math.PI*Math.atan(0.5*(Math.exp(c)-Math.exp(-c)))}function e(a){a>89.5&&(a=89.5);a<-89.5&&(a=-89.5);return 0-6378137*Math.log(Math.tan(0.5*(Math.PI*0.5-a*(Math.PI/180))))}var f="";if(this.Jb==1){var f=e(d(c,a)),g=e(d(c+1,a)),c=6378137*(b/Math.pow(2,a)*360-180)*(Math.PI/180),i=6378137*((b+1)/Math.pow(2,a)*360-180)*(Math.PI/180),a=Math.max(f,g),b=Math.max(c,i),g=Math.min(f,g),c=Math.min(c,i),f=this.url+
"service=WMS&request=GetMap&version="+this.version,f=f+"&Width="+this.tileSize+"&Height="+this.tileSize,f=f+"&Layers="+this.Qd+"&Format="+this.format;this.version.substr(0,3)=="1.0"||this.version.substr(0,3)=="1.1"?f=f+"&SRS="+this.ld:this.version.substr(0,3)=="1.3"&&(f=f+"&CRS="+this.ld);f=f+"&STYLES="+this.styles;f=f+"&BBOX="+c+","+g+","+b+","+a;f+=this.Id}return f};function bc(a){this.Ka=a}bc.prototype.rc=function(a,b,c,d){this.Ka.rc(a,b,c,d)};bc.prototype.ue=function(a){this.Ka.opacity=a};bc.prototype.Kd=function(){return this.Ka.opacity};function cc(a){$b.call(this,a||"MapQuest OSM","http://otile{sub}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",0,18,256,!1,["1","2","3","4"])}D(cc,$b);cc.prototype.ta=function(a){N(a,"Map data \u00a9 ",M("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA",M("br"));N(a,"Tiles Courtesy of ",M("a",{href:"http://open.mapquest.co.uk/"},"MapQuest")," ",M("img",{src:"http://developer.mapquest.com/content/osm/mq_logo.png",border:0}))};function dc(a){$b.call(this,a||"OpenStreetMaps","http://{sub}.tile.openstreetmap.org/{z}/{x}/{y}.png",0,18,256,!1,["a","b","c"])}D(dc,$b);dc.prototype.ta=function(a){N(a,"\u00a9 ",M("a",{href:"http://www.openstreetmap.org/"},"OpenStreetMap")," contributors, CC-BY-SA")};function ec(a,b,c){function d(){v(fc)&&(fc=new google.maps.Map(document.createElement("div")));gc?e():google.maps.event.addListenerOnce(fc,"idle",function(){gc=!0;e()})}Tb.call(this,"Google Maps - "+a);this.ba=n;this.Wd=a;this.Pd=b||0;this.ne=c||t;this.nb=new Qb;this.dc=0;this.ec=[];var e=A(function(){this.ba=fc.mapTypes[hc(a)];Wb(this);this.ne()},this);w(q.google)&&google.maps&&google.maps.Map?d():v(ic)?(ic="googleMapsCallback"+ra(),q[ic]=A(d,this),b=document.createElement("script"),Ha()[0].appendChild(b),
b.type="text/javascript",b.src="http://maps.google.com/maps/api/js?v=3.5&sensor=false&callback="+ic):q[ic]=Bb(q[ic],A(d,this))}D(ec,Tb);ec.prototype.Zb=function(){return!v(this.ba)};var ic=n,fc=n,gc=!1;p=ec.prototype;p.ya=function(){return v(this.ba)?0:this.ba.minZoom||0};p.oa=function(){return v(this.ba)?18:this.ba.maxZoom};p.pa=function(){return v(this.ba)?256:this.ba.tileSize.width};
p.Za=function(a,b,c){var d=A(function(a){a=a.getElementsByTagName("img");return a[this.Pd]||a[0]},this);a.Gc=d;a.Ec=A(function(a){this.ba.releaseTile(a)},this);var e=this.ba.getTile(new google.maps.Point(a.x,a.y),a.zoom,document),d=d(e);d.onload=A(function(){if(Fb(a).src==Fb(a).__src__)a.state=20,this.T--,b(a)},this);d.onerror=A(function(){a.Tb++;a.state=-10;this.T--;c&&c(a)},this);a.setData(e);a.state=10;this.T++};
p.ta=function(a){this.nb.fa()>0&&N(a,"Map Data \u00a9 "+(new Date).getFullYear()+" "+this.nb.qa().join(", ")+" \u2013 ");N(a,M("a",{href:"http://www.google.com/intl/en-US_US/help/terms_maps.html",target:"_blank"},"Terms of Use"))};p.rb=aa("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAYCAMAAACV6r5dAAABI1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxcXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAJCQkLCwsRERESEhIZGRkjIyMsLCw6OjpNTU1WVlZhYWFvb28AAABycnJ5eXl8fHzc3NyFhYWGhoaHiIeLi4uSkpKWlpaYmJiampqenp6mpqahoaGlpaWhoaGpqampqamrq6uqqqqur66vr6+usK6ysrK4uLi9vb3CwsLExMTJycnNzc3Q0NDT09PU1NTV1dXX19fZ2dmDg4Pg4ODi4uLj4+Pj4+Pl5eXk5OTl5eXk5OTl5eXk5OTo6Ojq6urv7+/x8fH5+fn9/f3////54OudAAAAYHRSTlNgXlpSTUY/Pjs5NTMwLSsoJiQiIB4cGhcUEgoBAAYXJy43QElWWV1SFRwQQp2LiaQyqYmwRIi1hwi5hyiEWrxsfwW/xMTJycW3qA2ajweNi4+YAdios7vFy5/g6vD2/P7aB358AAADLElEQVR4XpWUe3OiSBTFOxpMfDsqKt2dZGeiBBlx8zABx3EiZBJk8phsMyb4wvv9P8VexCpnq7aym/PX6Uv/qpt7uBDOuRB8IzRva2AYxinbbkNcrKvTqdGrMvtt2hoG4Es63+JIa9PAM03PX81GNf1NXPAR3O5av+GCn858kvlQLe+bcJfRORORYuB3G/sHuJXsbZ1wZbYgaU23bPrxcqd4wGMygsQ/bKynCN/WCTegsxtfWa8dHVhxe3oNigTaZ+OzorPIDofD62EtOv0H14a4RUGKKLOwWUAIxWxLcPr8apo+jDOHXJlGduXldT6YeuNwdWeWI5wNgnusf61YnJyu5uSQb4THTBckV8m44GaVl3kiV0n54JTkmZvKmeCT6PTUYPFtv7q3AFURZAgLUuds0xw+hG+7skVPQlCv4UzSbNqFkDxAK23lfThb49MVyQ8e/JtWXZDeKmy1t0n8BRd7GH47gL4LHQyCF2fwJ9q8YPfQLyGenC3V+8moKRUOOTlewFX+ERP9YaA+T8DZwxX7BTe3cJG1GVde4MqBm/QjN0CN8J0ZdLrpUlU/YJxQD+Y7mhDYZRNv7MFd0sJMnuHiNo6Y/oJOawnn5ePASTSe8HkAV/uyrq+DYydL+J7BmChNz8NPXVg265jZBMg5duUI669LkjlxfXfhJGSOuPSAe5Q4eSKULytw/6C4qmAz02NwU4z3wn4i/QLfs4wPw7NdrZ5NzKGTstafTdqHebfUGAyYIPyx3fVhOXm6vr5f+M1q1gn9kRH0E8d0zw1dtJdJ2eY058KyW8M3mTvNlg8wCzyZIs7tuqQ6ruuNTJVkNL3YMs2vrYxMLZpXTfNLMyMzakw8x4fVebmnqt3jekq96v+U2jpfz7teK2SzxUq7qumM2Uq7UqtpDOt2o12N7OHr/GczlezDItmoVeqKjkC+dKQzxONxsi1LtzaTiH7juLB0EcWgSkeaVRiDWheWiAE7nrj/EuP0BdRcNKGjJanheqP/iUdD7n/EpOSgL2mcvwtHRbdevk5x/qRP7P24oAX1YuxctnIy5e/HMZrGh0Kx3MY43o1vo/mX3/jfzoX94Q7k9zgAAAAASUVORK5CYII=");
p.gd=function(a){this.nb=new Qb;var b=q.GAddCopyright,c=q.GVerify,d=q.GAppFeatures;q.GAddCopyright=A(function(){arguments.length>7&&arguments[7].length>0&&this.nb.add(arguments[7])},this);q.GVerify=zb;q.GAppFeatures=A(function(){this.dc--;if(this.dc<=0)q.GAddCopyright=b,q.GVerify=c,q.GAppFeatures=d,G(this.ec,function(a){a.parentNode.removeChild(a)}),this.ec=[],this.Ob()},this);G(a,function(a){var b=document.createElement("script");Ha()[0].appendChild(b);b.type="text/javascript";this.ec.push(b);b.src=
"http://maps.google.com/maps?vp="+(K(a.Ad)+","+K(a.Bd))+"&z="+a.He+"&spn="+(K(a.we)+","+K(a.xe))+"&t="+jc(this.Wd);this.dc++},this)};function hc(a){switch(a){case "Terrain":return google.maps.MapTypeId.TERRAIN;case "Hybrid":return google.maps.MapTypeId.HYBRID;case "Roadmap":return google.maps.MapTypeId.ROADMAP;default:case "Satellite":return google.maps.MapTypeId.SATELLITE}}
function jc(a){switch(a){case "Terrain":return"p";case "Hybrid":return"h";case "Roadmap":return"m";default:case "Satellite":return"k"}}var kc=A(document.createElement,document);document.createElement=function(a){var b=kc(a);if(a=="img")b.crossOrigin="";return b};function lc(a,b){P.call(this,"Bing Maps - "+a);var c="bingsCallback_"+a,d="http://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+a+"?key="+b+"&jsonp="+c;q[c]=u(q[c])?Bb(A(this.kd,this),q[c]):A(this.kd,this);c=document.createElement("script");c.src=d;c.type="text/javascript";Ha()[0].appendChild(c)}D(lc,P);p=lc.prototype;p.Zb=function(){return!v(this.V)};p.kd=function(a){this.$a=a;if(a.resourceSets.length>0)this.V=a.resourceSets[0].resources[0],Wb(this);this.Ob()};
p.ya=function(){return v(this.V)?0:this.V.zoomMin};p.oa=function(){return v(this.V)?18:this.V.zoomMax};p.pa=aa(256);function mc(a,b,c){for(var d="",e=1;e<=a;e++)d+=(c>>a-e&1)<<1|b>>a-e&1;return d}p.Xb=function(a,b,c){return v(this.V)?"":this.V.imageUrl.replace("{subdomain}",this.V.imageUrlSubdomains[Math.floor(Math.random()*this.V.imageUrlSubdomains.length)]).replace("{quadkey}",mc(a,b,c))};p.Za=function(a,b,c){return v(this.V)?!1:lc.G.Za.call(this,a,b,c)};p.ta=function(a){v(this.$a)||N(a,this.$a.copyright)};
p.rb=function(){return!v(this.$a)?this.$a.brandLogoUri:n};p.$a=n;p.V=n;var nc=new Mb;function oc(a,b){var c=a;w(b)&&b.length>0&&(c+=b[0]);var d;switch(a){case "mapquest":d=cc;break;case "osm":d=dc;break;case "bing":d=lc;break;case "wms":d=ac;break;case "gooogle":d=ec;break;case "custom":d=$b;break;default:return alert("Unknown MapType '"+a+"' !"),n}d=function(a,b){function c(b){a.apply(this,b)}c.prototype=a.prototype;return new c(b)}(d,b);d=new bc(d);nc.set(c,d);return d}function pc(a,b){var c=a;w(b)&&(c+=b);return nc.get(c)};var qc;var rc=!L||ob(),sc=L&&!mb("8");function Q(a,b){this.type=a;this.currentTarget=this.target=b}D(Q,O);Q.prototype.q=function(){delete this.type;delete this.target;delete this.currentTarget};Q.prototype.Ra=!1;Q.prototype.eb=!0;Q.prototype.preventDefault=function(){this.eb=!1};function tc(a){tc[" "](a);return a}tc[" "]=t;function uc(a,b){a&&this.Wa(a,b)}D(uc,Q);var vc=[1,4,2];p=uc.prototype;p.target=n;p.relatedTarget=n;p.offsetX=0;p.offsetY=0;p.clientX=0;p.clientY=0;p.screenX=0;p.screenY=0;p.button=0;p.keyCode=0;p.charCode=0;p.ctrlKey=!1;p.altKey=!1;p.shiftKey=!1;p.metaKey=!1;p.re=!1;p.Pa=n;
p.Wa=function(a,b){var c=this.type=a.type;Q.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if($a){var e;a:{try{tc(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=n)}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==j?a.offsetX:a.layerX;this.offsetY=a.offsetY!==j?a.offsetY:a.layerY;this.clientX=a.clientX!==j?a.clientX:a.pageX;this.clientY=a.clientY!==j?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.re=Ua?a.metaKey:a.ctrlKey;this.state=a.state;this.Pa=a;delete this.eb;delete this.Ra};function wc(a,b){return rc?a.Pa.button==b:a.type=="click"?b==0:!!(a.Pa.button&vc[b])}
p.preventDefault=function(){uc.G.preventDefault.call(this);var a=this.Pa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,sc)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};p.q=function(){uc.G.q.call(this);this.relatedTarget=this.currentTarget=this.target=this.Pa=n};function xc(){}var yc=0;p=xc.prototype;p.key=0;p.Sa=!1;p.Bc=!1;p.Wa=function(a,b,c,d,e,f){ea(a)?this.Rc=!0:a&&a.handleEvent&&ea(a.handleEvent)?this.Rc=!1:h(Error("Invalid listener argument"));this.Ya=a;this.fd=b;this.src=c;this.type=d;this.capture=!!e;this.Yb=f;this.Bc=!1;this.key=++yc;this.Sa=!1};p.handleEvent=function(a){return this.Rc?this.Ya.call(this.Yb||this.src,a):this.Ya.handleEvent.call(this.Ya,a)};var zc,Ac=(zc="ScriptEngine"in q&&q.ScriptEngine()=="JScript")?q.ScriptEngineMajorVersion()+"."+q.ScriptEngineMinorVersion()+"."+q.ScriptEngineBuildVersion():"0";function R(a,b){this.Uc=b;this.xa=[];a>this.Uc&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.xa.push(this.ea?this.ea():{})}D(R,O);R.prototype.ea=n;R.prototype.Jc=n;R.prototype.getObject=function(){return this.xa.length?this.xa.pop():this.ea?this.ea():{}};function Bc(a,b){a.xa.length<a.Uc?a.xa.push(b):Cc(a,b)}function Cc(a,b){if(a.Jc)a.Jc(b);else if(fa(b))if(ea(b.n))b.n();else for(var c in b)delete b[c]}
R.prototype.q=function(){R.G.q.call(this);for(var a=this.xa;a.length;)Cc(this,a.pop());delete this.xa};var Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc;
(function(){function a(){return{p:0,U:0}}function b(){return[]}function c(){function a(b){b=g.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new xc}function e(){return new uc}var f=zc&&!(sa(Ac,"5.7")>=0),g;Ic=function(a){g=a};if(f){Dc=function(){return i.getObject()};Ec=function(a){Bc(i,a)};Fc=function(){return k.getObject()};Gc=function(a){Bc(k,a)};Hc=function(){return l.getObject()};Jc=function(){Bc(l,c())};Kc=function(){return r.getObject()};Lc=function(a){Bc(r,a)};Mc=function(){return m.getObject()};
Nc=function(a){Bc(m,a)};var i=new R(0,600);i.ea=a;var k=new R(0,600);k.ea=b;var l=new R(0,600);l.ea=c;var r=new R(0,600);r.ea=d;var m=new R(0,600);m.ea=e}else Dc=a,Ec=t,Fc=b,Gc=t,Hc=c,Jc=t,Kc=d,Lc=t,Mc=e,Nc=t})();var Oc={},S={},Pc={},Qc={};
function T(a,b,c,d,e){if(b)if(ca(b)){for(var f=0;f<b.length;f++)T(a,b[f],c,d,e);return n}else{var d=!!d,g=S;b in g||(g[b]=Dc());g=g[b];d in g||(g[d]=Dc(),g.p++);var g=g[d],i=z(a),k;g.U++;if(g[i]){k=g[i];for(f=0;f<k.length;f++)if(g=k[f],g.Ya==c&&g.Yb==e){if(g.Sa)break;return k[f].key}}else k=g[i]=Fc(),g.p++;f=Hc();f.src=a;g=Kc();g.Wa(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Oc[c]=g;Pc[i]||(Pc[i]=Fc());Pc[i].push(g);a.addEventListener?(a==q||!a.Fc)&&a.addEventListener(b,f,d):a.attachEvent(b in Qc?Qc[b]:
Qc[b]="on"+b,f);return c}else h(Error("Invalid event type"))}function Rc(a,b,c,d,e){if(ca(b))for(var f=0;f<b.length;f++)Rc(a,b[f],c,d,e);else{d=!!d;a:{f=S;if(b in f&&(f=f[b],d in f&&(f=f[d],a=z(a),f[a]))){a=f[a];break a}a=n}if(a)for(f=0;f<a.length;f++)if(a[f].Ya==c&&a[f].capture==d&&a[f].Yb==e){U(a[f].key);break}}}
function U(a){if(!Oc[a])return!1;var b=Oc[a];if(b.Sa)return!1;var c=b.src,d=b.type,e=b.fd,f=b.capture;c.removeEventListener?(c==q||!c.Fc)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Qc?Qc[d]:Qc[d]="on"+d,e);c=z(c);e=S[d][f][c];if(Pc[c]){var g=Pc[c];xa(g,b);g.length==0&&delete Pc[c]}b.Sa=!0;e.bd=!0;Sc(d,f,c,e);delete Oc[a];return!0}
function Sc(a,b,c,d){if(!d.tb&&d.bd){for(var e=0,f=0;e<d.length;e++)if(d[e].Sa){var g=d[e].fd;g.src=n;Jc(g);Lc(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.bd=!1;f==0&&(Gc(d),delete S[a][b][c],S[a][b].p--,S[a][b].p==0&&(Ec(S[a][b]),delete S[a][b],S[a].p--),S[a].p==0&&(Ec(S[a]),delete S[a]))}}
function Tc(a,b){var c,d=0,e=b==n,f=c==n;c=!!c;if(a==n)Ja(Pc,function(a){for(var g=a.length-1;g>=0;g--){var i=a[g];if((e||b==i.type)&&(f||c==i.capture))U(i.key),d++}});else{var g=z(a);if(Pc[g])for(var g=Pc[g],i=g.length-1;i>=0;i--){var k=g[i];if((e||b==k.type)&&(f||c==k.capture))U(k.key),d++}}}function Uc(a,b,c,d,e){var f=1,b=z(b);if(a[b]){a.U--;a=a[b];a.tb?a.tb++:a.tb=1;try{for(var g=a.length,i=0;i<g;i++){var k=a[i];k&&!k.Sa&&(f&=Vc(k,e)!==!1)}}finally{a.tb--,Sc(c,d,b,a)}}return Boolean(f)}
function Vc(a,b){var c=a.handleEvent(b);a.Bc&&U(a.key);return c}
Ic(function(a,b){if(!Oc[a])return!0;var c=Oc[a],d=c.type,e=S;if(!(d in e))return!0;var e=e[d],f,g;qc===j&&(qc=L&&!q.addEventListener);if(qc){var i;if(!(i=b))a:{i="window.event".split(".");for(var k=q;f=i.shift();)if(w(k[f]))k=k[f];else{i=n;break a}i=k}f=i;i=!0 in e;k=!1 in e;if(i){if(f.keyCode<0||f.returnValue!=j)return!0;a:{var l=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(r){l=!0}if(l||f.returnValue==j)f.returnValue=!0}}l=Mc();l.Wa(f,this);f=!0;try{if(i){for(var m=Fc(),E=l.currentTarget;E;E=
E.parentNode)m.push(E);g=e[!0];g.U=g.p;for(var s=m.length-1;!l.Ra&&s>=0&&g.U;s--)l.currentTarget=m[s],f&=Uc(g,m[s],d,!0,l);if(k){g=e[!1];g.U=g.p;for(s=0;!l.Ra&&s<m.length&&g.U;s++)l.currentTarget=m[s],f&=Uc(g,m[s],d,!1,l)}}else f=Vc(c,l)}finally{if(m)m.length=0,Gc(m);l.n();Nc(l)}return f}d=new uc(b,this);try{f=Vc(c,d)}finally{d.n()}return f});function V(a,b){if(a instanceof V)this.i=a.hb();else{var c;if(c=x(a))a:{for(var d=c=0;d<a.length;d++){if(!x(a[d])||c>0&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!da(a[d][e])){c=!1;break a}if(c==0)c=a[d].length}c=c!=0}c?this.i=za(a):a instanceof pb?this.i=Wc(a.height,a.width):da(a)&&da(b)&&a>0&&b>0?this.i=Wc(a,b):h(Error("Invalid argument(s) for Matrix contructor"))}this.e=new pb(this.i[0].length,this.i.length)}
function Xc(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new V(b)}function Yc(a,b,c){for(var d=0;d<a.e.height;d++)for(var e=0;e<a.e.width;e++)b.call(c,a.i[d][e],d,e,a)}function Zc(a,b){var c=new V(a.e);Yc(a,function(d,e,f){c.i[e][f]=b.call(j,d,e,f,a)});return c}function Wc(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}p=V.prototype;
p.add=function(a){qb(this.e,a.e)||h(Error("Matrix summation is only supported on arrays of equal size"));return Zc(this,function(b,c,d){return b+a.i[c][d]})};function $c(a,b){a.e.height!=b.e.height&&h(Error("The given matrix has height "+b.e.height+", but  needs to have height "+a.e.height+"."));var c=new V(a.e.height,a.e.width+b.e.width);Yc(a,function(a,b,f){c.i[b][f]=a});Yc(b,function(a,b,f){c.i[b][this.e.width+f]=a},a);return c}
p.equals=function(a,b){if(this.e.width!=a.e.width)return!1;if(this.e.height!=a.e.height)return!1;for(var c=b||0,d=0;d<this.e.height;d++)for(var e=0;e<this.e.width;e++)if(!(Math.abs(this.i[d][e]-a.i[d][e])<=(c||1.0E-6)))return!1;return!0};function ad(a){var b=new V(a.e.width,a.e.height);Yc(a,function(a,d,e){b.i[e][d]=a});return b}function W(a,b,c){return!(b>=0&&b<a.e.height&&c>=0&&c<a.e.width)?n:a.i[b][c]}
function bd(a,b,c,d){b>=0&&b<a.e.height&&c>=0&&c<a.e.width||h(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.e.height+","+a.e.width+")"));a.i[b][c]=d}p.multiply=function(a){if(a instanceof V)return this.e.width!=a.e.height&&h(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),cd(this,a);else if(da(a))return dd(this,a);else h(Error("A matrix can only be multiplied by a number or another matrix."))};
p.uc=function(a){qb(this.e,a.e)||h(Error("Matrix subtraction is only supported on arrays of equal size."));return Zc(this,function(b,c,d){return b-a.i[c][d]})};p.hb=o("i");function ed(a,b,c,d){var e=new V((c?c:a.e.height-1)-0+1,(d?d:a.e.width-1)-b+1);Yc(e,function(a,c,d){e.i[c][d]=this.i[0+c][b+d]},a);return e}function cd(a,b){var c=new V(a.e.height,b.e.width);Yc(c,function(a,e,f){for(var g=a=0;g<this.e.width;g++)a+=W(this,e,g)*W(b,g,f);bd(c,e,f,a)},a);return c}
function dd(a,b){return Zc(a,function(a){return a*b})};function fd(){this.B=Xc(4)}fd.prototype.translate=function(a,b,c){this.B=this.B.multiply(new V([[1,0,0,a],[0,1,0,b],[0,0,1,c],[0,0,0,1]]))};fd.prototype.scale=function(a,b,c){this.B=this.B.multiply(new V([[a,0,0,0],[0,b,0,0],[0,0,c,0],[0,0,0,1]]))};function gd(a,b){var c=Math.cos(b),d=Math.sin(b);a.B=a.B.multiply(new V([[1,0,0,0],[0,c,-d,0],[0,d,c,0],[0,0,0,1]]))}function hd(a,b){var c=Math.cos(b),d=Math.sin(b);a.B=a.B.multiply(new V([[c,-d,0,0],[d,c,0,0],[0,0,1,0],[0,0,0,1]]))};function id(a,b,c){function d(a,b){try{var c=a.getContext(b);if(w(c))return c}catch(d){}return n}for(var e=n,f=["webgl","experimental-webgl"],g=0;v(e)&&g<f.length;++g)e=e||d(a,f[g]);v(e)&&(u(c)?c():h(Error("unable to get a valid WebGL context")));e.enable(e.CULL_FACE);e.cullFace(e.BACK);e.clearColor(0,0,0,0);e.clearDepth(1);e.enable(e.DEPTH_TEST);e.depthFunc(e.LEQUAL);e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);this.canvas=a;this.Vb=b||n;this.c=e;this.Z=a.width;this.Y=a.height;e.viewport(0,0,this.Z,
this.Y);this.lb=this.wa=0;this.kb=1;this.Ua=this.Z/this.Y;this.Ea=Xc(4);this.I=new fd;this.xb=this.wb=this.Ea;this.Wb=this.pb=this.ac=this.Ac=this.Ub=0;T(q,"resize",this.cb,!1,this)}function jd(a){a.wa=J(50);a.lb=1.0E-6;a.kb=5;a.Ua=a.Z/a.Y;kd(a)}function kd(a){var b=1/Math.tan(a.wa/2);a.Ea=new V([[b/a.Ua,0,0,0],[0,b,0,0],[0,0,0,0],[0,0,-1,0]]);ld(a)}function ld(a){var b=a.lb-a.kb;bd(a.Ea,2,2,(a.kb+a.lb)/b);bd(a.Ea,2,3,2*a.kb*a.lb/b)}
id.prototype.cb=function(){this.Z=this.canvas.width=this.canvas.clientWidth;this.Y=this.canvas.height=this.canvas.clientHeight;this.c.viewport(0,0,this.Z,this.Y);this.Ua=this.Z/this.Y;kd(this);md(this.d)};id.prototype.d=n;
function nd(a){a.wb=a.Ea.multiply(a.I.B);var b,c=a.wb;c.e.width!=c.e.height&&h(Error("An inverse can only be taken on a square matrix."));b=Xc(c.e.height);a:{for(var c=$c(c,b),d=new V(c),e=0,f=0;f<d.e.height;f++){if(e>=d.e.width)break;for(var g=f;d.i[g][e]==0;)if(g++,g==d.e.height&&(g=f,e++,e==d.e.width)){c=d;break a}var i=c,k=f,l=i.i[g];i.i[g]=i.i[k];i.i[k]=l;g=d.i[f][e];for(i=e;i<d.e.width;i++)d.i[f][i]/=g;for(g=0;g<d.e.height;g++)if(g!=f){k=d.i[g][e];for(i=e;i<d.e.width;i++)d.i[g][i]-=k*d.i[f][i]}e++}c=
d}b=!ed(c,0,b.e.width-1,b.e.height-1).equals(b)?n:ed(c,b.e.width);a.xb=b;return a.wb}id.prototype.ed=t;id.prototype.bb="";function od(a,b,c){c=a.c.createShader(c);a.c.shaderSource(c,b);a.c.compileShader(c);a.c.getShaderParameter(c,a.c.COMPILE_STATUS)?v(c)&&h(Error("Unknown")):h(Error("Shader err: "+a.c.getShaderInfoLog(c)));return c};var pd={"earth-fs-overlay.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;uniform sampler2D uBufferL0B;uniform sampler2D uBufferL1B;uniform sampler2D uBufferL2B;varying float vFallbackB;varying vec2 vTCB;uniform float uMixFactor;void main(){float fallbackA=floor(vFallbackA+0.5);vec4 colorA;if(fallbackA==0.0){colorA=texture2D(uBufferL0A,vTCA);}else if(fallbackA==1.0){colorA=texture2D(uBufferL1A,vTCA);}else if(fallbackA==2.0){colorA=texture2D(uBufferL2A,vTCA);}else if(fallbackA==-1.0){colorA=texture2D(uBufferLnA,vTCA);}else{discard;}float fallbackB=floor(vFallbackB+0.5);vec4 colorB=vec4(0.0);if(fallbackB==0.0){colorB=texture2D(uBufferL0B,vTCB);}else if(fallbackB==1.0){colorB=texture2D(uBufferL1B,vTCB);}else if(fallbackB==2.0){colorB=texture2D(uBufferL2B,vTCB);}gl_FragColor=mix(colorA,colorB,uMixFactor*colorB.a);}",
"earth-fs.glsl":"precision mediump float;uniform sampler2D uBufferL0A;uniform sampler2D uBufferL1A;uniform sampler2D uBufferL2A;uniform sampler2D uBufferLnA;varying float vFallbackA;varying vec2 vTCA;void main(){float fallback=floor(vFallbackA+0.5);if(fallback==0.0){gl_FragColor=texture2D(uBufferL0A,vTCA);}else if(fallback==1.0){gl_FragColor=texture2D(uBufferL1A,vTCA);}else if(fallback==2.0){gl_FragColor=texture2D(uBufferL2A,vTCA);}else if(fallback==-1.0){gl_FragColor=texture2D(uBufferLnA,vTCA);}else{discard;}}",
"earth-vs-overlay.glsl":"#define BUFF_SIDE 4.0\n#define BUFF_SIZE 16\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;uniform float uMetaL0B[BUFF_SIZE];uniform float uMetaL1B[BUFF_SIZE];uniform float uMetaL2B[BUFF_SIZE];uniform vec2 uOffLB[3];varying float vFallbackB;varying vec2 vTCB;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;vFallbackB=-1.0;off=modFirst(tileCoords-uOffLB[0],uTileCount);if(validateOffset(off)&&uMetaL0B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLB[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLB[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2B[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackB=2.0;}}}if(vFallbackB>=0.0){vTCB=(off+aTextureCoord/exp2(vFallbackB)+mod(uOffLB[int(vFallbackB)],BUFF_SIDE))/BUFF_SIDE;}else{vTCB=(tileCoords+aTextureCoord)/uTileCount;}vTCB.y=1.0-vTCB.y;}",
"earth-vs.glsl":"#define BUFF_SIDE 8.0\n#define BUFF_SIZE 64\n#define TERRAIN %TERRAIN_BOOL%\n#define BUFF_SIDE_T %BUFFER_SIDE_T_FLOAT%\n#define BUFF_SIZE_T int(BUFF_SIDE_T*BUFF_SIDE_T)\nprecision highp float;const float PI=3.1415927;const float PI2=6.2831855;const float EARTH_RADIUS=6378137.0;const float TERRAIN_MIN=-10000.0;const float TERRAIN_MAX=12000.0;attribute vec2 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVPMatrix;uniform float uTileCount;uniform vec2 uOffset;uniform float uMetaL0A[BUFF_SIZE];uniform float uMetaL1A[BUFF_SIZE];uniform float uMetaL2A[BUFF_SIZE];uniform vec2 uOffLA[3];varying float vFallbackA;varying vec2 vTCA;\n#if TERRAIN\nuniform float uMetaL0T[BUFF_SIZE_T];uniform float uMetaL1T[BUFF_SIZE_T];uniform vec2 uOffLT[2];uniform sampler2D uBufferL0T;uniform sampler2D uBufferL1T;uniform sampler2D uBufferLnT;uniform float uDegradationT;bool validateOffsetT(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE_T&&off.y<BUFF_SIDE_T;}\n#endif\nbool validateOffset(vec2 off){return off.x>=0.0&&off.y>=0.0&&off.x<BUFF_SIDE&&off.y<BUFF_SIDE;}vec2 modFirst(vec2 x,float y){return vec2(x.x-y*floor(x.x/y),x.y);}void main(){vec2 phi=PI2*(aVertexPosition+uOffset)/uTileCount;vec2 tileCoords=vec2(mod(aVertexPosition.x-aTextureCoord.x+uOffset.x+uTileCount*0.5,uTileCount),-aTextureCoord.y-aVertexPosition.y-uOffset.y+uTileCount*0.5);float elev=0.0;\n#if TERRAIN\nvec2 TCT;float fallbackT=-1.0;float degradationModifier=exp2(uDegradationT);vec2 offT=modFirst(tileCoords/degradationModifier-uOffLT[0],uTileCount/degradationModifier);vec2 rawElev;if(validateOffsetT(offT)&&uMetaL0T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=0.0;}else{offT=modFirst((tileCoords/(2.0*degradationModifier))-uOffLT[1],uTileCount/(2.0*degradationModifier));if(validateOffsetT(offT)&&uMetaL1T[int(floor(offT.y)*BUFF_SIDE_T+offT.x)]==1.0){fallbackT=1.0;}else{TCT=(tileCoords+aTextureCoord)/uTileCount;}}if(fallbackT>=0.0){TCT=(offT+aTextureCoord/(exp2(fallbackT)*degradationModifier)+mod(uOffLT[int(fallbackT)],BUFF_SIDE_T))/BUFF_SIDE_T;}TCT.y=1.0-TCT.y;if(fallbackT==0.0){rawElev=texture2D(uBufferL0T,TCT).rg;}else if(fallbackT==1.0){rawElev=texture2D(uBufferL1T,TCT).rg;}else{rawElev=texture2D(uBufferLnT,TCT).rg;}elev=((TERRAIN_MAX-TERRAIN_MIN)*(rawElev.r+rawElev.g/256.0)-TERRAIN_MAX)/EARTH_RADIUS;\n#endif\nfloat exp_2y=exp(2.0*phi.y);float tanh=((exp_2y-1.0)/(exp_2y+1.0));float cosy=sqrt(1.0-tanh*tanh);vec3 pos=vec3(sin(phi.x)*cosy,tanh,cos(phi.x)*cosy);gl_Position=uMVPMatrix*vec4(pos*(1.0+elev),1.0);if(abs(phi.y)>PI){vFallbackA=-1.0e3;return;}vFallbackA=-1.0;vec2 off=modFirst(tileCoords-uOffLA[0],uTileCount);if(validateOffset(off)&&uMetaL0A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=0.0;}else{off=modFirst((tileCoords/2.0)-uOffLA[1],uTileCount/2.0);if(validateOffset(off)&&uMetaL1A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=1.0;}else{off=modFirst((tileCoords/4.0)-uOffLA[2],uTileCount/4.0);if(validateOffset(off)&&uMetaL2A[int(floor(off.y)*BUFF_SIDE+off.x)]==1.0){vFallbackA=2.0;}}}if(vFallbackA>=0.0){vTCA=(off+aTextureCoord/exp2(vFallbackA)+mod(uOffLA[int(vFallbackA)],BUFF_SIDE))/BUFF_SIDE;}else{vTCA=(tileCoords+aTextureCoord)/uTileCount;}vTCA.y=1.0-vTCA.y;}",
"halo-fs.glsl":"precision lowp float;uniform sampler2D uGradient;varying vec2 vCoords;void main(){float distance=vCoords.x*vCoords.x+vCoords.y*vCoords.y;if(distance<0.98){discard;}else{gl_FragColor=texture2D(uGradient,vec2((sqrt(distance)-1.0)/0.1,0.5));}}","halo-vs.glsl":"precision lowp float;attribute vec2 aVertexPosition;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec2 vCoords;void main(){gl_Position=uPMatrix*(uMVMatrix[3]+uMVMatrix[0]*aVertexPosition.x+uMVMatrix[1]*aVertexPosition.y);gl_Position.z=0.0;vCoords=aVertexPosition;}"};function qd(a){return a in pd?pd[a]:Ea("../we/shaders/"+a)};function rd(a){var c;this.a=a.a;c=this.c=a.a.c,a=c;this.od=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.od);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1.1,1.1,-1.1,1.1,1.1,-1.1,-1.1,-1.1]),a.STATIC_DRAW);this.Nc=a.createTexture();var b=new Uint8Array([224,224,255,255,207,218,250,220,179,194,245,180,137,166,237,145,84,123,221,110,51,94,198,75,25,67,178,30,13,53,161,0]);a.bindTexture(a.TEXTURE_2D,this.Nc);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,8,1,0,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b=qd("halo-fs.glsl");a=qd("halo-vs.glsl");b=od(this.a,b,this.c.FRAGMENT_SHADER);a=od(this.a,a,this.c.VERTEX_SHADER);this.P=this.c.createProgram();v(this.P)&&h(Error("Unknown"));this.c.attachShader(this.P,a);this.c.attachShader(this.P,b);this.c.bindAttribLocation(this.P,0,"aVertexPosition");
this.c.linkProgram(this.P);this.c.getProgramParameter(this.P,this.c.LINK_STATUS)||h(Error("Shader program err: "+this.c.getProgramInfoLog(this.P)));this.jb=this.c.getAttribLocation(this.P,"aVertexPosition");this.c.enableVertexAttribArray(this.jb);this.fe=this.c.getUniformLocation(this.P,"uMVMatrix");this.pe=this.c.getUniformLocation(this.P,"uPMatrix");this.Ld=this.c.getUniformLocation(this.P,"uGradient")}
rd.prototype.draw=function(){this.c.useProgram(this.P);this.c.bindBuffer(this.c.ARRAY_BUFFER,this.od);this.c.vertexAttribPointer(this.jb,2,this.c.FLOAT,!1,0,0);this.c.activeTexture(this.c.TEXTURE0);this.c.bindTexture(this.c.TEXTURE_2D,this.Nc);this.c.uniform1i(this.Ld,0);var a=new Float32Array(Da(ad(this.a.I.B).hb())),b=new Float32Array(Da(ad(this.a.Ea).hb()));this.c.uniformMatrix4fv(this.fe,!1,a);this.c.uniformMatrix4fv(this.pe,!1,b);this.c.drawArrays(this.c.TRIANGLE_STRIP,0,4)};function sd(){}D(sd,O);p=sd.prototype;p.Fc=!0;p.oc=n;p.addEventListener=function(a,b,c,d){T(this,a,b,c,d)};p.removeEventListener=function(a,b,c,d){Rc(this,a,b,c,d)};
p.dispatchEvent=function(a){var b=a.type||a,c=S;if(b in c){if(y(a))a=new Q(a,this);else if(a instanceof Q)a.target=a.target||this;else{var d=a,a=new Q(b,this);Pa(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.oc)e.push(f);f=c[!0];f.U=f.p;for(var g=e.length-1;!a.Ra&&g>=0&&f.U;g--)a.currentTarget=e[g],d&=Uc(f,e[g],a.type,!0,a)&&a.eb!=!1}if(!1 in c)if(f=c[!1],f.U=f.p,b)for(g=0;!a.Ra&&g<e.length&&f.U;g++)a.currentTarget=e[g],d&=Uc(f,e[g],a.type,!1,a)&&a.eb!=!1;else for(e=this;!a.Ra&&e&&
f.U;e=e.oc)a.currentTarget=e,d&=Uc(f,e,a.type,!1,a)&&a.eb!=!1;a=Boolean(d)}else a=!0;return a};p.q=function(){sd.G.q.call(this);Tc(this);this.oc=n};function td(a){this.f=a;this.aa=this.S=0;this.w=1E7;this.Bb=this.ka=this.Qa=0}D(td,sd);p=td.prototype;p.setPosition=function(a,b){this.S=H(a,-1.57,1.57);this.aa=Fa(b);this.dispatchEvent(new ud(vd))};function wd(a,b,c){function d(a){var d=c;c=d*Math.cos(a)-2*b*Math.sin(a);b=d*Math.sin(a)/2+b*Math.cos(a)}d(a.Bb);b/=Math.max(Math.abs(Math.cos(a.ka)),0.1);d(a.Qa);a.setPosition(a.S+b,a.aa+c)}p.getPosition=function(){return[this.S,this.aa]};
function xd(a,b){a.w=H(b,250,1E7);a.dispatchEvent(new ud(yd))}function zd(a){return Ad(a.f,a.f.a.Z/2,a.f.a.Y/2,!0)}p.setHeading=function(a){this.Qa=a};p.setTilt=function(a){this.ka=a};p.getHeading=o("Qa");p.getTilt=o("ka");var vd="poschanged",yd="altchanged";function ud(a){Q.call(this,a)}D(ud,Q);function Bd(a,b,c,d,e){function f(a,b,c,d){a?a=b:(a=b/Math.max(1,Math.sqrt(c*c+d*d)),a=Math.max(1,Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))));return a}a=a.c;this.X=[];this.Ma=[];this.h=[];for(var g=-b/2;g<b/2;++g)for(var i=-c/2;i<c/2;++i){var k=f(e,d,g,i),l=[i+1<c/2&&f(e,d,g,i+1)>k,g+1<b/2&&f(e,d,g+1,i)>k,i-1>-c/2&&f(e,d,g,i-1)>k,g-1>-b/2&&f(e,d,g-1,i)>k];Cd(this,g,i,k,l)}this.Ib=a.createBuffer();this.Gb=a.createBuffer();this.Pc=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Ib);a.bufferData(a.ARRAY_BUFFER,
new Float32Array(this.X),a.STATIC_DRAW);this.Ib.$b=2;a.bindBuffer(a.ARRAY_BUFFER,this.Gb);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.Ma),a.STATIC_DRAW);this.Gb.$b=2;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Pc);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.h),a.STATIC_DRAW);this.ie=this.h.length}
function Cd(a,b,c,d,e){for(var f=a.X.length/2,g=0;g<=d;++g)for(var i=0;i<=d;++i)a.X.push(b+i/d,c+g/d),a.Ma.push(i/d,1-g/d);var k=[0,0,0,0];if(e[0]){k[0]=a.X.length/2;for(i=0;i<d;++i)a.X.push(b+(i+0.5)/d,c+1),a.Ma.push((i+0.5)/d,0)}if(e[1]){k[1]=a.X.length/2;for(g=0;g<d;++g)a.X.push(b+1,c+(g+0.5)/d),a.Ma.push(1,1-(g+0.5)/d)}if(e[2]){k[2]=a.X.length/2;for(i=0;i<d;++i)a.X.push(b+(i+0.5)/d,c),a.Ma.push((i+0.5)/d,1)}if(e[3]){k[3]=a.X.length/2;for(g=0;g<d;++g)a.X.push(b,c+(g+0.5)/d),a.Ma.push(0,1-(g+0.5)/
d)}b=A(function(){},a);c=d+1;for(g=0;g<d;++g)for(i=0;i<d;++i){var l=f+g*c+i;a.h.push(l);var r=g==0&&e[2],m=i==0&&e[3];r&&!m?(a.h.push(k[2]+i),a.h.push(l+c),b(),a.h.push(k[2]+i)):m&&!r?(a.h.push(l+1),a.h.push(k[3]+g),b(),a.h.push(k[3]+g)):m&&r&&(a.h.push(k[2]+i),a.h.push(k[3]+g),b(),a.h.push(k[3]+g),a.h.push(k[2]+i),a.h.push(l+c),b(),a.h.push(k[2]+i));a.h.push(l+1);a.h.push(l+c);b();a.h.push(l+c+1);r=g==d-1&&e[0];m=i==d-1&&e[1];r&&!m?(a.h.push(k[0]+i),a.h.push(l+1),b(),a.h.push(k[0]+i)):m&&!r?(a.h.push(l+
c),a.h.push(k[1]+g),b(),a.h.push(k[1]+g)):r&&m&&(a.h.push(k[0]+i),a.h.push(k[1]+g),b(),a.h.push(k[1]+g),a.h.push(k[0]+i),a.h.push(l+1),b(),a.h.push(k[0]+i));a.h.push(l+c);a.h.push(l+1);b()}};function Dd(a,b,c,d){b=b.c;this.j=a;this.jb=b.getAttribLocation(this.j,"aVertexPosition");b.enableVertexAttribArray(this.jb);this.md=b.getAttribLocation(this.j,"aTextureCoord");b.enableVertexAttribArray(this.md);this.ge=X(b,this.j,"uMVPMatrix");this.Xd=X(b,this.j,"uMetaL0A");this.$d=X(b,this.j,"uMetaL1A");this.ce=X(b,this.j,"uMetaL2A");this.Rd=X(b,this.j,"uOffLA");this.qd=X(b,this.j,"uBufferL0A");this.td=X(b,this.j,"uBufferL1A");this.wd=X(b,this.j,"uBufferL2A");this.yd=X(b,this.j,"uBufferLnA");if(c)this.Yd=
X(b,this.j,"uMetaL0B"),this.ae=X(b,this.j,"uMetaL1B"),this.de=X(b,this.j,"uMetaL2B"),this.Sd=X(b,this.j,"uOffLB"),this.rd=X(b,this.j,"uBufferL0B"),this.ud=X(b,this.j,"uBufferL1B"),this.xd=X(b,this.j,"uBufferL2B"),this.ee=X(b,this.j,"uMixFactor");if(d)this.Ed=X(b,this.j,"uDegradationT"),this.Zd=X(b,this.j,"uMetaL0T"),this.be=X(b,this.j,"uMetaL1T"),this.Td=X(b,this.j,"uOffLT"),this.sd=X(b,this.j,"uBufferL0T"),this.vd=X(b,this.j,"uBufferL1T"),this.zd=X(b,this.j,"uBufferLnT");this.Ce=X(b,this.j,"uTileCount");
this.ke=X(b,this.j,"uOffset")}function X(a,b,c){a=a.getUniformLocation(b,c);v(a)&&h(Error("Invalid name "+c));return a};function Ed(a,b){this.sb=a||1;this.gb=b||Fd;this.Lb=A(this.ze,this);this.cc=B()}D(Ed,sd);Ed.prototype.enabled=!1;var Fd=q.window;p=Ed.prototype;p.Ja=n;p.ze=function(){if(this.enabled){var a=B()-this.cc;if(a>0&&a<this.sb*0.8)this.Ja=this.gb.setTimeout(this.Lb,this.sb-a);else if(this.dispatchEvent(Gd),this.enabled)this.Ja=this.gb.setTimeout(this.Lb,this.sb),this.cc=B()}};p.start=function(){this.enabled=!0;if(!this.Ja)this.Ja=this.gb.setTimeout(this.Lb,this.sb),this.cc=B()};
p.stop=function(){this.enabled=!1;if(this.Ja)this.gb.clearTimeout(this.Ja),this.Ja=n};p.q=function(){Ed.G.q.call(this);this.stop();delete this.gb};var Gd="tick";function Hd(a){this.ja=new Mb;this.Ca=[];this.ye=512;this.Cc=new Ed(2E4);T(this.Cc,Gd,this.Cd,!1,this);this.Cc.start();Id(this,a)}function Id(a,b){a.nd=B();a.N=b;Kb(a.ja,function(a){a.n()});a.ja.clear();a.Ca=[]}p=Hd.prototype;p.N=n;p.nd=0;p.Be=t;
p.Cd=function(){var a=va(this.ja.qa(),function(a){return a.state==20||a.state==Eb||a.state==-10});for(Ba(a,function(a,b){return a.ra-b.ra});this.ja.fa()>this.ye&&a.length>0;){var b=a.shift();b.state==Eb&&xa(this.Ca,b);this.ja.remove(b.zoom+"_"+b.x+"_"+b.y);b.n()}};p.De=function(a){a.ra<this.nd?(a.state=-10,this.ja.remove(a.zoom+"_"+a.x+"_"+a.y),a.n()):this.Be(a)};
function Jd(a){Ba(a.Ca,function(a,b){return a.ra-b.ra});for(var b=Math.min(a.Ca.length,5-a.N.T),c=0;c<b;c++)Xb(a.N,a.Ca.pop(),A(a.De,a))};function Kd(a,b,c,d){this.$=b;this.la=[];this.g=c;this.N=a;this.vc=new Hd(a);this.H=d;this.M=1<<this.H;this.Oa=this.g>=this.M;this.ha=this.Da=0;this.buffer=n;this.C=[];Ld(this)}function Ld(a){a.C=[];for(var b=0;b<a.g;++b)a.C.push(Array(a.g));a.buffer&&a.buffer.clear()}Kd.prototype.disable=function(){this.la=[];Ld(this);this.buffer=n};Kd.prototype.da=function(a){this.N=a;Id(this.vc,a);this.la=[];Ld(this)};
function Md(a){a.la=[];for(var b=A(function(a,b){var c=(this.Oa?this.M:this.g)/2;a+=c;b+=c;this.C[b][a]!==1&&Nd(this,this.Da+a,this.ha+b,d)},a),c=A(function(a,c){for(var d=-c;d<c;++d)b(d,-c),b(d,c-1);for(d=-c;d<c;++d)b(-c,d),b(c-1,d)},a),d=B(),a=Math.min(a.g,a.M)/2;a>0;--a)c(d+a,a)}
function Nd(a,b,c,d){var b=I(b,a.M),c=I(c,a.M),e;a:{e=a.vc;var f=a.H,g=b,i=c,c=f+"_"+g+"_"+i,b=e.ja.get(c);if(w(b))b.state==-10?d-b.ra>7E3&&(b.n(),b=new Db(f,g,i,d),e.ja.set(c,b),e.Ca.push(b)):b.ra=d;else{d=b=new Db(f,g,i,d);f=Ub(e.N,d.zoom);if(!(d.x>=f.left&&d.x<=f.right&&d.y>=f.top&&d.y<=f.bottom)){e=n;break a}e.ja.set(c,b);e.Ca.push(b)}e=b}!v(e)&&e.state==20&&a.la.push(e)};function Od(a,b,c){var d;d=this.ga=a.c,a=d;this.Ta=b;this.za=c;this.Q=a.createTexture();Pd(this)}Od.prototype.cb=function(a,b){if(!(this.Ta==a&&this.za==b))this.Ta=a,this.za=b,this.ga.deleteTexture(this.Q),this.Q=this.ga.createTexture(),Pd(this)};
function Pd(a){var b=a.ga;b.bindTexture(b.TEXTURE_2D,a.Q);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.Ta,a.za,0,b.RGBA,b.UNSIGNED_BYTE,n);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR_MIPMAP_LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_LINEAR)}Od.prototype.clear=function(){this.ga.deleteTexture(this.Q);this.Q=this.ga.createTexture();Pd(this)};function Qd(a,b,c){function d(b){f.isTexture(g)&&(b.Tb>=3||Xb(a,b,e,d))}function e(c){if(f.isTexture(g)){f.bindTexture(f.TEXTURE_2D,g);try{f.texSubImage2D(f.TEXTURE_2D,0,c.x*k,(i-c.y-1)*k,f.RGBA,f.UNSIGNED_BYTE,Fb(c))}catch(l){a.Mb()&&(a.sc(b.bb)||!(c.Aa&&c.Aa.src.lastIndexOf(b.bb,0)==0))?Xb(a,c,e,d):b.ed()}}}var f=this.ga=b.c,g=f.createTexture();this.Q=g;var i=1<<c,k=a.pa();f.bindTexture(f.TEXTURE_2D,g);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,1);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,k*i,k*i,0,f.RGBA,f.UNSIGNED_BYTE,
n);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);for(var l=0;l<i;++l)for(var r=0;r<i;++r)Xb(a,new Db(c,l,r),e,d)}D(Qd,O);Qd.prototype.q=function(){this.ga.deleteTexture(this.Q)};function Rd(a,b,c,d,e,f,g){this.$=b;this.g=c;this.O=e;this.vb=f;this.N=a;var i=a.pa();this.ca=[];for(var k=0;k<d;++k)this.ca.push(new Od(b,this.g*i,this.g*i));for(this.u=[];e<=f;++e)this.u.push(new Kd(a,b,c,e));for(k=0;k<d;++k)this.u[k].buffer=this.ca[k];this.R=0;this.Xa=g?n:new Qd(a,b,2)}Rd.prototype.da=function(a){if(!v(this.Xa))this.Xa.n(),this.Xa=new Qd(a,this.$,2);this.N=a;var b=this.g*a.pa();G(this.ca,function(a){a.cb(b,b)});G(this.u,function(b){b.da(a)});Sd(this)};
function Td(a,b,c,d,e,f){for(var f=H(f,a.O,a.vb),g=f-(a.O+a.R+a.ca.length-1);g>0;){var i=a.u[a.R].buffer;a.u[a.R].disable();a.u[++a.R+a.ca.length-1].buffer=i;g--}for(;g<0&&a.R>0;)i=a.u[a.R+a.ca.length-1].buffer,a.u[a.R+a.ca.length-1].disable(),a.u[--a.R].buffer=i,g++;for(var g=1<<f,k=!1,c=(c/(2*Math.PI)+0.5)*g,b=(0.5-Vb(b)/(Math.PI*2))*g,e=(e/(2*Math.PI)+0.5)*g,i=(0.5-Vb(d)/(Math.PI*2))*g,d=f-a.O;d>=a.R;d--){var l=H(c-a.g/2,e-a.g,e),r=H(b-a.g/2,i-a.g,i),m=Ub(a.N,a.O+d),l=H(l,m.left,m.right+1-a.g),
r=H(r,m.top,m.bottom+1-a.g),l=I(Math.round(l),g),r=Math.round(r),m=a.u[d],E=r,r=!1;if(!m.Oa){var s=l-m.Da,ha=E-m.ha;Math.abs(s)>m.M/2&&(s=(s-(s==0?0:s<0?-1:1)*m.M)%m.M);m.Da=l;m.ha=E;if(Math.abs(s)>=m.g||Math.abs(ha)>=m.g)Ld(m),r=!0;else{r=s!=0||ha!=0;if(s>0)for(l=0;l<m.g;++l)m.C[l].splice(0,s),m.C[l].push.apply(m.C[l],Array(s));if(s<0)for(l=0;l<m.g;++l)m.C[l].splice(m.g+s,-s),m.C[l].unshift.apply(m.C[l],Array(-s));if(ha>0)for(l=0;l<ha;++l)m.C.shift(),m.C.push(Array(m.g));if(ha<0)for(l=0;l<-ha;++l)m.C.pop(),
m.C.unshift(Array(m.g))}}Md(m);k|=r;c/=2;b/=2;e/=2;i/=2}k&&Sd(a);e=1;for(d=a.R;e>0&&d<=f-a.O;d++){g=e;c=a.u[d];b=0;if(c.la.length>0){e=Math.min(c.la.length,e>=0?1:0);for(i=0;i<e;i++){l=c;k=c.la.pop();if(!v(l.buffer)&&k.zoom==l.H&&(m=k.x-l.Da,r=k.y-l.ha,s=1<<l.H,m=I(m,s),r=I(r,s),!(m<0||m>=l.g||r<0||r>=l.g))){s=l.$.c;E=l.N.pa();s.bindTexture(s.TEXTURE_2D,l.buffer.Q);ha=I(m+l.Da,l.g)*E;E*=l.g-I(r+l.ha,l.g)-1;try{s.texSubImage2D(s.TEXTURE_2D,0,ha,E,s.RGBA,s.UNSIGNED_BYTE,Fb(k)),l.C[r][m]=1}catch(Ie){l.N.Mb()&&
(l.N.sc(l.$.bb)||!(k.Aa&&k.Aa.src.lastIndexOf(l.$.bb,0)==0))?Nd(l,k.x,k.y,k.ra):l.$.ed()}}b++}}Jd(c.vc);b>0&&(c.$.c.bindTexture(c.$.c.TEXTURE_2D,c.buffer.Q),c.$.c.generateMipmap(c.$.c.TEXTURE_2D));e=g-b}}function Ud(a,b,c){return b>a.vb||b-c<a.O?Array(a.g*a.g):Da(a.u[b-a.O-c].C)}function Vd(a,b,c){return b>a.vb||b-c<a.O?n:a.u[b-a.O-c].buffer.Q}
function Wd(a,b,c){if(b>a.vb)return Array(2*c);for(var d=[],e=b-a.O;e>b-a.O-c;--e)d.push(Math.round(a.u[Math.max(0,e)].Da),Math.round(a.u[Math.max(0,e)].ha));return d}function Sd(a){for(var b=Array(a.ca.length),c=0;c<a.ca.length;c++){var d=a.u[a.R+c],e=Xd((0.5-d.ha/d.M)*2*Math.PI),f=Xd((0.5-(d.ha+d.g)/d.M)*2*Math.PI);b[c]=new Zb(d.Oa?0:Xd((0.5-(d.ha+d.g/2)/d.M)*2*Math.PI),d.Oa?0:((d.Da+d.g/2)/d.M-0.5)*2*Math.PI,d.Oa?Math.PI/2:Math.abs(e-f),d.Oa?Math.PI:d.g/d.M*2*Math.PI,d.H)}a.N.gd(b)};function Yd(a,b){this.a=a.a;this.d=a;this.A=b||new cc;this.J=new Rd(this.A,this.a,8,3,1,19);this.z=this.va=n;this.Ha=!1;this.da(this.A,!0);this.Ia=1;this.gc=[0,0];this.jd=[new Bd(this.a,1,1,1),new Bd(this.a,4,4,16,!0),new Bd(this.a,6,6,8,!0),new Bd(this.a,8,8,8,!0),new Bd(this.a,10,10,8),new Bd(this.a,64,64,this.Ha?8:4)];this.Ud=Zd(this,!1);this.Vd=Zd(this,!0);this.H=n;T(this.d.b,yd,this.Ge,!1,this)}p=Yd.prototype;
p.da=function(a,b,c){if(a)a.Ob=A(this.d.wc,this.d);if(c)if(this.va=a)w(this.z)?this.z.da(a):(this.J=new Rd(this.A,this.a,4,3,1,19),this.z=new Rd(this.va,this.a,4,3,0,15));else{if(w(this.z))this.J=new Rd(this.A,this.a,8,3,1,19),this.z=n}else{if(!a)return;this.J.da(a);this.A=a}b!==!0&&(md(this.d),this.d.wc(),this.setZoom(this.getZoom()))};
p.draw=function(){var a=this.a.c;this.Ia=1<<this.getZoom();var b=this.d.b.getPosition(),c=zd(this.d.b)||b;this.gc[0]=Math.floor(b[1]/(2*Math.PI)*this.Ia);this.gc[1]=H(Math.floor(Vb(b[0])/(Math.PI*2)*this.Ia),-this.Ia/2,this.Ia/2);Td(this.J,c[0],c[1],b[0],b[1],Math.floor(this.getZoom()));this.z&&Td(this.z,c[0],c[1],b[0],b[1],Math.floor(this.getZoom()));this.Ha&&Td(this.na,c[0],c[1],b[0],b[1],Math.floor(this.getZoom())-5);c=Math.floor(this.getZoom());this.Ia=1<<c;b=this.z?this.Vd:this.Ud;a.useProgram(b.j);
a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,Vd(this.J,c,0));a.uniform1i(b.qd,0);a.activeTexture(a.TEXTURE1);a.bindTexture(a.TEXTURE_2D,Vd(this.J,c,1));a.uniform1i(b.td,1);a.activeTexture(a.TEXTURE2);a.bindTexture(a.TEXTURE_2D,Vd(this.J,c,2));a.uniform1i(b.wd,2);a.activeTexture(a.TEXTURE3);a.bindTexture(a.TEXTURE_2D,this.J.Xa.Q);a.uniform1i(b.yd,3);a.uniform1fv(b.Xd,new Float32Array(Ud(this.J,c,0)));a.uniform1fv(b.$d,new Float32Array(Ud(this.J,c,1)));a.uniform1fv(b.ce,new Float32Array(Ud(this.J,
c,2)));a.uniform2fv(b.Rd,new Float32Array(Wd(this.J,c,3)));this.z&&(a.activeTexture(a.TEXTURE4),a.bindTexture(a.TEXTURE_2D,Vd(this.z,c,0)),a.uniform1i(b.rd,4),a.activeTexture(a.TEXTURE5),a.bindTexture(a.TEXTURE_2D,Vd(this.z,c,1)),a.uniform1i(b.ud,5),a.activeTexture(a.TEXTURE6),a.bindTexture(a.TEXTURE_2D,Vd(this.z,c,2)),a.uniform1i(b.xd,6),a.uniform1fv(b.Yd,new Float32Array(Ud(this.z,c,0))),a.uniform1fv(b.ae,new Float32Array(Ud(this.z,c,1))),a.uniform1fv(b.de,new Float32Array(Ud(this.z,c,2))),a.uniform2fv(b.Sd,
new Float32Array(Wd(this.z,c,3))),a.uniform1f(b.ee,this.va.opacity));if(this.Ha){var d=H(c-5,2,this.Fb.oa());a.uniform1f(b.Ed,c-d);a.activeTexture(a.TEXTURE7);a.bindTexture(a.TEXTURE_2D,Vd(this.na,d,0));a.uniform1i(b.sd,7);a.activeTexture(a.TEXTURE8);a.bindTexture(a.TEXTURE_2D,Vd(this.na,d,1));a.uniform1i(b.vd,8);a.activeTexture(a.TEXTURE9);a.bindTexture(a.TEXTURE_2D,this.na.Xa.Q);a.uniform1i(b.zd,9);a.uniform1fv(b.Zd,new Float32Array(Ud(this.na,d,0)));a.uniform1fv(b.be,new Float32Array(Ud(this.na,
d,1)));a.uniform2fv(b.Td,new Float32Array(Wd(this.na,d,2)))}d=new Float32Array(Da(ad(nd(this.a)).hb()));c=this.jd[Math.min(c,this.jd.length-1)];a.bindBuffer(a.ARRAY_BUFFER,c.Ib);a.vertexAttribPointer(b.jb,c.Ib.$b,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,c.Gb);a.vertexAttribPointer(b.md,c.Gb.$b,a.FLOAT,!1,0,0);a.uniformMatrix4fv(b.ge,!1,d);a.uniform1f(b.Ce,this.Ia);a.uniform2fv(b.ke,new Float32Array(this.gc));a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.Pc);a.drawElements(a.TRIANGLES,c.ie,a.UNSIGNED_SHORT,
0)};
function Zd(a,b){var c=a.a.c,d=qd("earth-fs"+(b?"-overlay":"")+".glsl"),e=qd("earth-vs"+(b?"-overlay":"")+".glsl"),e=e.replace("%TERRAIN_BOOL%",a.Ha?"1":"0");a.Ha&&(e=e.replace("%BUFFER_SIDE_T_FLOAT%",a.na.g.toFixed(1)));var d=od(a.a,d,c.FRAGMENT_SHADER),e=od(a.a,e,c.VERTEX_SHADER),f=c.createProgram();v(f)&&h(Error("Unknown"));c.attachShader(f,e);c.attachShader(f,d);c.bindAttribLocation(f,0,"aVertexPosition");c.linkProgram(f);c.getProgramParameter(f,c.LINK_STATUS)||h(Error("Shader program err: "+c.getProgramInfoLog(f)));
return new Dd(f,a.a,b,a.Ha)}p.setZoom=function(a){this.H=H(a,this.A.ya(),this.A.oa());xd(this.d.b,$d(this,this.H,this.d.b.S))};p.Ge=function(){this.H=n};p.getZoom=function(){v(this.H)&&ae(this);return this.H};function ae(a,b){var c=a.d.b,c=Math.log(Math.cos(Math.abs(c.S))*2*Math.PI/(2*(c.w/6378137)*Math.tan(a.a.wa/2)/a.d.Hb))/Math.LN2;return b?c:(a.H=H(c,a.A.ya(),a.A.oa()),a.H)}function $d(a,b,c){return 1/Math.tan(a.a.wa/2)*(Math.cos(Math.abs(c))*2*Math.PI/Math.pow(2,b)*a.d.Hb/2)*6378137}
function be(a,b,c,d){var e=Math.sin((c-a)/2),b=Math.sin((d-b)/2);return 6378137*2*Math.asin(Math.sqrt(e*e+Math.cos(a)*Math.cos(c)*b*b))};function ce(a,b,c){this.x=u(a)?a:0;this.y=u(b)?b:0;this.k=u(c)?c:0}ce.prototype.La=function(){return new ce(this.x,this.y,this.k)};ce.prototype.hb=function(){return[this.x,this.y,this.k]};function de(a,b,c){this.x=a;this.y=b;this.k=c}D(de,ce);p=de.prototype;p.La=function(){return new de(this.x,this.y,this.k)};p.scale=function(a){this.x*=a;this.y*=a;this.k*=a;return this};p.normalize=function(){return this.scale(1/Math.sqrt(this.x*this.x+this.y*this.y+this.k*this.k))};p.add=function(a){this.x+=a.x;this.y+=a.y;this.k+=a.k;return this};p.uc=function(a){this.x-=a.x;this.y-=a.y;this.k-=a.k;return this};p.equals=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.k==a.k};function ee(a,b,c,d,e,f){if(v(d))return n;a=d.multiply(new V([[a/e*2-1],[1-2*b/f],[c*2-1],[1]]));if(W(a,3,0)==0)return n;a=a.multiply(1/W(a,3,0));return new de(W(a,0,0),W(a,1,0),W(a,2,0))};function fe(a,b,c,d,e,f,g){this.a=a;this.Qc=b||n;this.sa=c||document.createElement("div");if(!u(c))a=this.a.canvas,a.parentNode&&a.parentNode.insertBefore(this.sa,a.nextSibling);this.ib=d||document.createElement("img");if(!u(d))d=this.sa,d.parentNode&&d.parentNode.insertBefore(this.ib,d.nextSibling);this.pd=f||n;this.b=new td(this);this.r=new Yd(this,e);this.Oc=g===!0?n:new rd(this);this.Hb=0;md(this);this.wc()}
fe.prototype.wc=function(){if(!v(this.sa)){for(var a=this.sa,b;b=a.firstChild;)a.removeChild(b);N(this.sa,this.pd);this.r.A.ta(this.sa);this.r.va&&(N(this.sa,M("br"),M("strong",{},"Overlay data:"),M("br")),this.r.va.ta(this.sa))}if(!v(this.ib))v(this.r.A.rb())?this.ib.style.visibility="hidden":(this.ib.src=this.r.A.rb(),this.ib.style.visibility="visible")};function md(a){a.Hb=0.7*a.a.canvas.height/a.r.A.pa()}
fe.prototype.draw=function(){var a=this.a.c;if(!v(this.Qc)){for(var b=this.Qc,c=K(this.b.S).toFixed(4)+"; "+K(this.b.aa).toFixed(4)+" @ "+this.b.w.toFixed(0)+"m -> z="+this.r.getZoom().toFixed(3)+"; ",d=this.r,e=d.J,f="",g=0;g<e.u.length;++g)f+=g+e.O+":"+e.u[g].la.length+" ";e="BufferQueue size: "+f+"; Loading tiles: "+d.A.T;d.va&&(e+=" + "+d.va.T);b.innerHTML=c+e}b=this.b.w/6378137;c=this.a;c.lb=0.25*b;c.kb=1+b;ld(c);if(this.Oc)a.enable(a.BLEND),a.disable(a.DEPTH_TEST),b=Math.sin((Math.PI-this.a.wa)/
2),c=Math.sin(this.a.wa/2),this.a.I.B=Xc(4),gd(this.a.I,-this.b.getTilt()),this.a.I.translate(0,0,c-1-this.b.w/6378137),this.a.I.scale(b,b,b),this.Oc.draw(),a.disable(a.BLEND),a.enable(a.DEPTH_TEST);this.a.I.B=Xc(4);hd(this.a.I,-this.b.Bb);gd(this.a.I,-this.b.getTilt());hd(this.a.I,-this.b.getHeading());this.a.I.translate(0,0,-1-this.b.w/6378137);gd(this.a.I,this.b.S);a=this.a.I;c=-this.b.aa;b=Math.cos(c);c=Math.sin(c);a.B=a.B.multiply(new V([[b,0,c,0],[0,1,0,0],[-c,0,b,0],[0,0,0,1]]));this.r.draw()};
function ge(a,b){var c=a.La();c.x=-c.x;c.y=-c.y;c.k=-c.k;var d=b.x*c.x+b.y*c.y+b.k*c.k,e=d*d-(c.x*c.x+c.y*c.y+c.k*c.k)+1;return e<0?n:(c=Math.min(d+Math.sqrt(e),d-Math.sqrt(e)),d=Math.max(d+Math.sqrt(e),d-Math.sqrt(e)),[c,d])}
function Ad(a,b,c,d){var e=ee(b,c,0,a.a.xb,a.a.Z,a.a.Y),a=ee(b,c,1,a.a.xb,a.a.Z,a.a.Y);if(v(e)||v(a))return n;a.uc(e);a.normalize();b=ge(e,a);if(v(b))return n;a=a.scale(b[0]);e=new de(e.x+a.x,e.y+a.y,e.k+a.k);a=Math.asin(e.x/Math.sqrt(1-e.y*e.y));e.k<0&&(a=Math.PI-a);return d==!0?[Math.asin(e.y),Fa(a)]:[K(Math.asin(e.y)),K(Fa(a))]}function Vb(a){return Math.log(Math.tan(a/2+Math.PI/4))}function Xd(a){return 2*Math.atan(Math.exp(a))-Math.PI/2};function he(a,b,c){this.lat=a;this.ub=b;this.element=c;this.parentElement=n;this.enabled=!0;this.visible=!1}he.prototype.detach=function(){if(this.parentElement){var a=this.element;a&&a.parentNode&&a.parentNode.removeChild(a);this.parentElement=n}};he.prototype.enable=function(a){(this.enabled=a||!1)||this.show(!1)};he.prototype.isEnabled=o("enabled");he.prototype.show=function(a){this.visible=a==!0;this.element.style.display=this.visible?"block":"none"};function ie(a,b,c,d,e){var f=M("div",{"class":"we-pm-icon"});if(y(c))f.style.backgroundImage="url("+c+")";this.Ta=d||25;this.za=e||41;f.style.width=this.Ta.toFixed(0)+"px";f.style.height=this.za.toFixed(0)+"px";f.style.marginLeft=(-this.Ta/2).toFixed(0)+"px";f.style.marginTop=(-this.za).toFixed(0)+"px";c=M("div",{style:"position:absolute;"},f);he.call(this,a,b,c);this.t=n;this.show(!1);this.Db(!1);f.onclick=A(this.Db,this,!0)}D(ie,he);ie.prototype.Db=function(a){this.t&&this.t.show(a)};Ga(".we-pm-icon{position:absolute;z-index:64;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFtklEQVR42p3Wa0xTZxgH8CYkS5aQLGFxcXNZNNu4FIFCK9eCWOQm3lDizLYP+zTnxLk5wQpICxRaLuWi3FpQFMU55xDkjiBTFMeA9Zy2JzMxWUZisoS4TyRuQvG/pydQKb3Q2uSXw3nf93n+5z2nLRVIiga88RERL/MlAgDrosJ+d/zISTJMEFt2B9LyEV5kySBo7G+iI9vdhyj7nfEhcjKfUvcAma0z+Pwa5+BwuxG7myaRUH4XtHaAhLgI6VvLjwwn14zj0CUWn13lkHXZhPQWBml6e3svGq3zvIyGX0F1z0mWQ4hY0buaH3mcUvsAn17hcKDNhFQdsy4K5Nfv108jsXIM1OOoqxAfMppMAYepIF3PIrmZ8cqhy2ZkXjBYQyxE9iqksGeFXKa9h0PtHF0di6Qmxhk+fKeLOcLX72r8DdRvjvjxIRGFt638yPz+Vha7W0zY0cDYydAbkXWJ4+1rYWx/H2gzO6wl/JysehzUUw0+5Oxtq+zEyns42MYhsZ6xQ2N0C0yQae9DouhFZt1dOvYgnt5RGU3T/Dw1tqtJ1xn5Gur7D/ERRBR0W43vapzhd5FwnrHZ02Kmt+jvkBTeRsOdPzD/7wJWXkPGp0hSD2BnzUMcuMjZ1RF+LFY1BOotFYQXdPkSy/5WDvF1DKSr8GOau7g1/RecvWafzSOuuBf79CYkNxodandox0G9VYLw/FvCSGUf9rZQci1js6PeiPRGAw7WjTgNePnyJa9mgJ5h1QPsWVOf0kTBdZOg/p0CUV6nNKp4ALv1HKJrGJu0Znqo1RNQds64DLBYLBjjniK6ZMihXtZgRPK5KVD/UYHozM+R1p1k6DhEaRmblAYK0U4g/8aUy4DFxUUMMLOIUQ071CfVm5BUOwnq30shNzeJC7qwq5nDtirGJq6GRWoDixR1HxYsS3YhS0tLWFhY4OVdf4TEqgmkNprt6ukiafwhqL9OECb/yYfMpzaaEKllIa5kbNKa6D6XjqK632i3C9oBH3DPPIttyn5+XUy1Y22cegzUO18QdvqGVWdC5SNK5xBezqyg3dB9pW1Hl4wgu20cM3/O4b+FRTx++gwNgywkeTfhrE5cwfBj4oJuUG+hIDT3RyuZpLAXO+s5hGkYOzHVRn5cWv4Q4rM91iJE5HchpnQMsjrWWY1tPfUd5j/xoTnXV0zEV05Cds6MUDVjR6RhkXSecxBTbXJYG0ZojnbRA+opXQ75YUWmpLCfro7D1lLmdfH1Us0EqN+o7Vs45NS1FT7kSXzVDGK1ZghVzGtJpJAI2gX1Sn4V8n3HakcliiEk1HIILGG8FldtRqxmEtRn2u6f1taTHau9SebitCzCNUb4FzNekdZwCC/oA/XIsg/57upaKrFiBHFaDh8rGY9FVZgRrZ4C1T8mPnYhwd9eWWsDeR5TaUKwyogPFYxHYqo4iPL7QbVf8M3tQ9qd0UUoxhBdyWFLIbOucLUJkeoZUN0secMx5MRlZwKIhW4BXSWLzWcZt6IqrLsYBNWccPq7S/jNJVe6wxX3sU1jxgf5BpeExUZIygyg9XPE13nI8TZXtm89dRNiCnk/z+AKPx+aNwhaX+jyZ2pQ9kV3JkTKRxCVmrDpjMGBv4JFRBkLWjdP3nITcsGdT4JzuiAqM+NduWEtfjzkzBBoXQXf0GXIsVZ3fMiTsKIpBBYZsfG0wWZzAQuRygSaf0E2ug0J/LplPdnBOT0IVZnxTq5hBX8eLB8Gzev4Zu5D9OvxJXMhRQZsoavfkEPPQ84gpMQEGreQLeuGBBzVe0IVlDuA4GIz3j5l4I9B8hHQeIfbAFvIVzpPbCQvhEoT3pOzEBaZEZh9BTQW4mFIs6d0gbl3EKSkAPkY6LyXCDwLOdLsKWHAsXYEKswIOH4NdC4lnoX4H2nyRnfA6THQ8Zflcw9Dvmz0xnb/7A7QMW353OMQb7USgTch/wNGSWfRl/HE1wAAAABJRU5ErkJggg==);}");function je(a,b){this.f=a;this.Rb=b;this.fc=new Mb}
je.prototype.Fe=function(a){a=this.fc.get(a);if(a.isEnabled()){var b;a:{var c=this.f;b=a.lat;var d=a.ub;b=J(b);var d=J(d),e=Math.cos(b),e=new de(Math.sin(d)*e,Math.sin(b),Math.cos(d)*e),d=c.a.wb.multiply(new V([[e.x],[e.y],[e.k],[1]]));if(W(d,3,0)==0)b=n;else{d=d.multiply(1/W(d,3,0));b=(W(d,0,0)+1)/2*c.a.Z;var d=(W(d,1,0)-1)/-2*c.a.Y,f=1;if(b<0||b>c.a.Z||d<0||d>c.a.Y)f=0;else{c=ee(0.5,0.5,0,c.a.xb,1,1);if(v(c)){b=n;break a}var f=e.x-c.x,g=e.y-c.y,i=e.k-c.k,f=Math.sqrt(f*f+g*g+i*i),e=e.uc(c).normalize(),
e=ge(c,e),f=v(e)?0:Math.abs(f-e[0])<Math.abs(f-e[1])?1:0}b=[b,d,f]}}w(b)?(d=b[1],a.element.style.left=b[0].toFixed()+"px",a.element.style.top=d.toFixed()+"px",a.enabled&&a.show(!0),a.show(b[2]>0)):a.show(!1)}};function Y(a,b,c,d){(!ca(a)||!ca(b))&&h(Error("Start and end parameters must be arrays"));a.length!=b.length&&h(Error("Start and end points must be the same length"));this.fb=a;this.Gd=b;this.duration=c;this.zc=d;this.coords=[]}D(Y,sd);var Na={},ke=n;function le(){me();var a=B(),b;for(b in Na)ne(Na[b],a);ke=Ma()?n:Fd.setTimeout(le,20)}function me(){ke&&(Fd.clearTimeout(ke),ke=n)}function oe(a){a=z(a);delete Na[a];Ma()&&me()}p=Y.prototype;p.W=0;p.Mc=0;p.D=0;p.startTime=n;p.Lc=n;p.bc=n;
p.play=function(a){if(a||this.W==0)this.D=0,this.coords=this.fb;else if(this.W==1)return!1;oe(this);this.startTime=a=B();this.W==-1&&(this.startTime-=this.duration*this.D);this.Lc=this.startTime+this.duration;this.bc=this.startTime;this.D||this.ab();pe(this,"play");this.W==-1&&this.mc();this.W=1;var b=z(this);b in Na||(Na[b]=this);ke||(ke=Fd.setTimeout(le,20));ne(this,a);return!0};p.stop=function(a){oe(this);this.W=0;if(a)this.D=1;qe(this,this.D);this.nc();this.Ab()};
p.q=function(){this.W!=0&&this.stop(!1);this.hc();Y.G.q.call(this)};function ne(a,b){a.D=(b-a.startTime)/(a.Lc-a.startTime);if(a.D>=1)a.D=1;a.Mc=1E3/(b-a.bc);a.bc=b;qe(a,a.D);a.D==1?(a.W=0,oe(a),pe(a,"finish"),a.Ab()):a.W==1&&pe(a,"animate")}function qe(a,b){ea(a.zc)&&(b=a.zc(b));a.coords=Array(a.fb.length);for(var c=0;c<a.fb.length;c++)a.coords[c]=(a.Gd[c]-a.fb[c])*b+a.fb[c]}p.ab=function(){pe(this,"begin")};p.hc=function(){pe(this,"destroy")};p.Ab=function(){pe(this,"end")};
p.mc=function(){pe(this,"resume")};p.nc=function(){pe(this,"stop")};function pe(a,b){a.dispatchEvent(new re(b,a))}function re(a,b){Q.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.k=b.coords[2];this.duration=b.duration;this.D=b.D;this.Ub=b.Mc;this.state=b.W;this.Je=b}D(re,Q);function se(a){this.Rb=a;this.o=T(this.Rb,$a?"DOMMouseScroll":"mousewheel",this)}D(se,sd);
se.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Pa;if(a.type=="mousewheel"){c=1;if(L||ab&&(db||mb("532.0")))c=40;d=ab&&Ua&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;u(a.wheelDeltaX)?(b=ab&&Ua&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=ab&&Ua&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),u(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;da(this.Vc)&&(b=H(b,-this.Vc,this.Vc));da(this.Wc)&&(c=H(c,-this.Wc,this.Wc));b=new te(d,
a,b,c);try{this.dispatchEvent(b)}finally{b.n()}};se.prototype.q=function(){se.G.q.call(this);U(this.o);delete this.o};function te(a,b,c,d){b&&this.Wa(b,j);this.type="mousewheel";this.detail=a;this.Ke=c;this.Hc=d}D(te,uc);function ue(a){this.f=a;this.ad=new se(a.a.canvas);this.o=T(this.ad,"mousewheel",function(a){this.H(-(a.Hc==0?0:a.Hc<0?-1:1));a.preventDefault()},!1,this);this.Dd=T(a.a.canvas,"dblclick",A(function(a){xd(this.b,this.b.w/2);var c=Ad(this,a.offsetX,a.offsetY,!0)||zd(this.b);if(c){var d=(this.b.aa+c[1])/2;Math.abs(this.b.aa-c[1])>Math.PI&&(d+=Math.PI);this.b.setPosition((this.b.S+c[0])/2,d)}a.preventDefault()},a));this.se=T(a.a.canvas,"mouseup",A(function(a){if(wc(a,2)){xd(this.b,this.b.w*2);var c=Ad(this,
a.offsetX,a.offsetY,!0)||zd(this.b);c&&this.b.setPosition(2*this.b.S-c[0],2*this.b.aa-c[1]);a.preventDefault()}},a));this.he=T(a.a.canvas,"contextmenu",function(a){a.preventDefault()});this.m=n;this.Ga=this.Fa=0}D(ue,O);
ue.prototype.H=function(a){var b=120;a*=-1;if(this.m)if(this.Ga>this.Fa==a>0)return;else this.m.n(),this.m=n,b*=(this.f.b.w-this.Fa)/(this.Ga-this.Fa),a=this.Ga,this.Ga=this.Fa,this.Fa=a;else this.Fa=this.f.b.w,this.Ga=H(this.Fa*Math.pow(2,a),250,1E7);if(!(isNaN(b)||b<=0)){var a=this.f.b.getPosition(),c=zd(this.f.b)||a,d=this.Ga/this.f.b.w;a.push(this.f.b.w);this.m=new Y(a,[c[0]+d*(a[0]-c[0]),c[1]+d*(a[1]-c[1]),this.Ga],b);T(this.m,["animate","finish"],function(a){this.f.b.setPosition(a.x,a.y);xd(this.f.b,
a.k)},!1,this);T(this.m,["finish"],this.Hd,!1,this);this.m.play(!1)}};ue.prototype.Hd=function(){if(this.m)this.m.n(),this.m=n};ue.prototype.q=function(){U(this.o);U(this.Dd);U(this.se);U(this.he);this.ad.n();this.m.n()};function ve(a){this.Md=a;this.l=[]}D(ve,O);var we=[];function xe(a,b,c){var d="finish";ca(d)||(we[0]=d,d=we);for(var e=0;e<d.length;e++)a.l.push(T(b,d[e],c||a,!1,a.Md||a))}ve.prototype.qc=function(){G(this.l,U);this.l.length=0};ve.prototype.q=function(){ve.G.q.call(this);this.qc()};ve.prototype.handleEvent=function(){h(Error("EventHandler.handleEvent not implemented"))};function Z(){Y.call(this,[0],[0],0);this.F=[]}D(Z,Y);Z.prototype.mc=function(){this.Sb(function(a){a.play(a.D==0)});Z.G.mc.call(this)};Z.prototype.nc=function(){this.Sb(function(a){a.stop()});Z.G.nc.call(this)};Z.prototype.hc=function(){this.Ic();Z.G.hc.call(this)};Z.prototype.Ic=function(){G(this.F,function(a){a.n()})};function ye(){Z.call(this)}D(ye,Z);ye.prototype.ab=function(){for(var a=0;a<this.F.length;a++)this.F[a].play();ye.G.ab.call(this)};ye.prototype.Sb=function(a){G(this.F,a)};
ye.prototype.add=function(a){this.F.push(a);this.duration=Math.max(this.duration,a.duration)};ye.prototype.remove=function(a){if(xa(this.F,a)&&a.duration==this.duration)this.duration=0,G(this.F,function(a){this.duration=Math.max(a.duration,this.duration)},this)};function ze(){Z.call(this);this.Nb=new ve(this)}D(ze,Z);p=ze.prototype;p.ua=0;p.ab=function(){Ae(this);ze.G.ab.call(this)};p.Ab=function(){Be(this);ze.G.Ab.call(this)};function Be(a){a.ua=0;a.Nb.qc()}
function Ae(a){a.W==-1&&(Be(a),G(a.F,function(a){a.D=0;qe(a,a.D);a.stop()}));a.F[a.ua].play();a.ua++;a.ua<a.F.length&&xe(a.Nb,a.F[a.ua-1],function(){Ae(this)})}p.add=function(a){this.F.push(a);this.duration+=a.duration};p.remove=function(a){xa(this.F,a)&&(this.duration-=a.duration)};p.Sb=function(a){this.ua>0&&a(this.F[this.ua-1])};p.Ic=function(){G(this.F,function(a){a.n()});this.Nb.n()};function Ce(a){this.ma=a;this.m=n;this.Eb=[];this.ob=[]}
function De(a,b,c,d,e,f){function g(a){var b=a*a;a*=a*a;return 6*a*b+-15*b*b+10*a}w(a.m)&&a.ic();a.m=new ye;var i=a.ma.getPosition();a.Eb=[0,0,a.ma.getHeading(),a.ma.getTilt()];a.ob=[0,0,e||0,f||0];Ee(a,i[0],i[1],b,c);e=["begin","animate","end"];f=new Y(a.Eb,a.ob,3E3,g);T(f,e,a.me,!1,a);a.m.add(f);if(d)c=be(i[0],i[1],b,c),b=a.ma.w,c=Math.min(b,d)+c*0.2,c=Math.max(Math.max(b,d),c),b=new Y([b],[c],1500,g),d=new Y([c],[d],1500,g),T(b,e,a.dd,!1,a),T(d,e,a.dd,!1,a),e=new ze,e.add(b),e.add(d),a.m.add(e);
T(a.m,"end",a.ic,!1,a);a.m.play()}function Ee(a,b,c,d,e){var c=I(c,2*Math.PI),e=I(e,2*Math.PI),f=c-e;f<-Math.PI?c+=2*Math.PI:f>Math.PI&&(e+=2*Math.PI);a.Eb[0]=b;a.Eb[1]=c;a.ob[0]=d;a.ob[1]=e}Ce.prototype.me=function(a){this.ma.setPosition(a.coords[0],a.coords[1]);this.ma.setHeading(a.coords[2]);this.ma.setTilt(a.coords[3])};Ce.prototype.dd=function(a){xd(this.ma,a.coords[0])};Ce.prototype.ic=function(){if(w(this.m))this.m.n(),this.m=n};Ce.prototype.cancel=function(){this.ic()};function Fe(a,b){this.f=a;this.ia=j;this.L=this.K=this.hd=0;this.o=n;T(this.f.a.canvas,"mousedown",A(this.jc,this));T(wb(this.f.a.canvas),"mouseup",A(this.lc,this));this.v=b||n}
Fe.prototype.jc=function(a){if(!wc(a,2)&&!a.ctrlKey&&!a.altKey){w(this.v)&&this.v.cancel();this.K=a.screenX;this.L=a.screenY;if(wc(a,1)||wc(a,0)&&a.shiftKey)if(this.ia=zd(this.f.b),w(this.ia)){if(window.Va)window.Va.lat=K(this.ia[0]),window.Va.ub=K(this.ia[1]),window.Va.enable(!0);this.hd=this.f.b.getTilt()==0?this.f.b.w:Math.sin(Math.PI-this.f.b.getTilt()-(Math.PI-Math.asin((1+this.f.b.w/6378137)*Math.sin(this.f.b.getTilt()))))/Math.sin(this.f.b.getTilt())*6378137}if(!v(this.o))U(this.o),this.o=
n;this.o=T(wb(this.f.a.canvas),"mousemove",A(this.kc,this));a.preventDefault()}};Fe.prototype.lc=function(a){a.preventDefault();this.ia=j;window.Va&&window.Va.enable(!1);if(!v(this.o))U(this.o),this.o=n};
Fe.prototype.Cb=function(a,b){if(u(this.ia)){var c=a/this.f.a.canvas.width*Math.PI*-2,d=b/this.f.a.canvas.height*Math.PI/2;if(v(this.ia))this.f.b.setHeading(this.f.b.getHeading()+c),this.f.b.setTilt(this.f.b.getTilt()+d);else{var e=this.f.b,f=this.ia[0],g=this.ia[1],i=this.hd;e.Qa+=c;c=Math.asin(6378137/Math.sqrt(i*i+40680631590769));e.ka=H(e.ka+d,-c,c);d=Math.asin(i/6378137*Math.sin(e.ka));Math.abs(e.ka)<1.0E-4?xd(e,i):xd(e,(Math.sin(Math.PI-e.ka-d)/Math.sin(e.ka)-1)*6378137);f-=Math.cos(e.Qa)*d;
e.setPosition(f,g+Math.sin(e.Qa)*d/Math.cos(f))}}};Fe.prototype.kc=function(a){this.Cb(a.screenX-this.K,a.screenY-this.L);this.K=a.screenX;this.L=a.screenY;a.preventDefault()};function Ge(a){return 1-Math.pow(1-a,3)};function He(a,b){this.f=a;this.Qb=!1;this.zb=this.yb=this.L=this.K=0;this.Ba=this.o=n;T(this.f.a.canvas,"mousedown",A(this.jc,this));T(wb(this.f.a.canvas),"mouseup",A(this.lc,this));this.v=b||n}p=He.prototype;p.jc=function(a){if(wc(a,0)&&!a.ctrlKey&&!a.altKey){w(this.v)&&this.v.cancel();if(this.Ba)this.Ba.stop(!1),this.Ba.n(),this.Ba=n;this.Qb=!0;this.yb=this.K=a.screenX;this.zb=this.L=a.screenY;if(!v(this.o))U(this.o),this.o=n;this.o=T(wb(this.f.a.canvas),"mousemove",A(this.kc,this));a.preventDefault()}};
p.lc=function(a){if(this.Qb){a.preventDefault();this.Qb=!1;if(!v(this.o))U(this.o),this.o=n;if(wc(a,0)){var b=a.screenX-this.yb,c=a.screenY-this.zb,a=Math.sqrt(Math.pow(b,2)+Math.pow(c,2));b/=a;c/=a;this.K==this.yb&&this.L==this.zb&&(a*=2);if(a>6)a=Math.max(15,a)*6,this.Ba=new Y([this.K,this.L],[this.K+a*b,this.L+a*c],1300,Ge),T(this.Ba,["animate"],this.Nd,!1,this),this.Ba.play(!1)}}};
p.Cb=function(a,b){var c=Math.PI*(1/this.f.a.canvas.height)*(this.f.Hb/Math.pow(2,ae(this.f.r,!0)));wd(this.f.b,b*c,-2*a*c)};p.kc=function(a){this.Cb(a.screenX-this.K,a.screenY-this.L);this.yb=this.K;this.zb=this.L;this.K=a.screenX;this.L=a.screenY;a.preventDefault()};p.Nd=function(a){this.Cb(a.x-this.K,a.y-this.L);this.K=a.x;this.L=a.y};function $(a,b){var c=b||{},d=y(a)?document.getElementById(a):a;if(!v(d)){var e=M("canvas",{style:"width:100%;height:100%;"});this.a=new id(e,n,function(){var a=M("a",{style:"font-size:110%;display:block;width:100%;top:50%;position:relative;text-align:center;color:#800000;text-shadow:rgba(0,0,0,0.4) 0 0 6px;",href:"http://www.webglearth.com/upgrade.html"},"You need a WebGL-enabled browser to run this application.");N(d,a)});if(w(this.a)){jd(this.a);var f=M("div",{style:"width:100%;height:100%;position:relative;"});
N(d,f);N(f,e);oc("mapquest");oc("osm");this.Sc=new Ed(15);T(this.Sc,Gd,A(function(){var a=this.a,b=a.c;if(!v(a.Vb)){var c=B();if(a.ac<B()-2E3)a.Ub=1E3*a.pb/(B()-a.ac),a.Ac=a.Wb/a.pb,a.ac=B(),a.pb=0,a.Wb=0,a.Vb.innerHTML=a.Ac.toFixed(2)+" ms / fps: "+a.Ub.toFixed(2);a.pb++}b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);a.I.B=Xc(4);a.d.draw();!v(a.Vb)&&(a.Wb+=B()-c);a=this.Tc;G(a.fc.qb(),a.Fe,a)},this));var e=M("img",{style:"position:absolute;bottom:0;right:0"}),g=M("div",{style:"position:absolute;bottom:5px;left:5px;width:75%;font-size:8px;text-align:justify;color:#fff;font-family:Verdana,Arial;text-shadow:rgba(0,0,0,0.8) 0 0 4px;"});
N(f,e);N(f,g);this.a.d=new fe(this.a,j,g,e,w(c.map)?pc(c.map).Ka:j,M("p",n,"Powered by ",M("a",{href:"http://www.webglearth.org/",style:"color:#00f"},"WebGL Earth"),"."),c.atmosphere===!1);this.Tc=new je(this.a.d,f);f=c.position;e=c.center;w(f)&&f.length>1?this.a.d.b.setPosition(J(f[0]),J(f[1])):w(e)&&e.length>1&&this.a.d.b.setPosition(J(e[0]),J(e[1]));f=c.zoom;w(f)&&this.a.d.r.setZoom(f);f=c.altitude;w(f)&&xd(this.a.d.b,f);f=c.proxyHost;if(y(f))this.a.bb=f;this.v=new Ce(this.a.d.b);this.qe=n;if(c.panning!==
!1)this.qe=new He(this.a.d,this.v);this.Ee=n;if(c.tilting!==!1)this.Ee=new Fe(this.a.d,this.v);this.Ie=n;if(c.zooming!==!1)this.Ie=new ue(this.a.d);this.a.cb();this.Sc.start()}}}p=$.prototype;p.setMap=function(a,b){var c=pc(a,b);w(c)&&this.a.d.r.da(c.Ka)};p.te=function(a){this.a.d.r.da(a.Ka)};p.ve=function(a){this.a.d.r.da(w(a)?a.Ka:n,!1,!0)};p.yc=function(a){return A(function(b){var c=Ad(this.a.d,b.offsetX,b.offsetY);b.target=this;b.latitude=w(c)?c[0]:n;b.longitude=w(c)?c[1]:n;a(b)},this)};
p.le=function(a,b){var c=T(this.a.canvas,a,this.yc(b));return b[z(this)+"___eventKey_"+a]=c};p.cd=function(a,b){if(w(b)){var c=b[z(this)+"___eventKey_"+a];w(c)&&U(c)}else y(a)||U(a)};p.je=function(a){Tc(this.a.canvas,a)};p.Od=function(a,b,c,d,e){a=new ie(a,b,c,d,e);b=this.Tc;c=ra();d=b.Rb;a.parentElement&&a.detach();a.parentElement=d;a.parentElement.appendChild(a.element);b.fc.set(c,a);return a};C("WebGLEarth",$);C("WebGLEarth.prototype.setCenter",function(a){this.v.cancel();this.a.d.b.setPosition(J(a[0]),J(a[1]));this.a.d.b.setTilt(0)});C("WebGLEarth.prototype.getCenter",function(){return[K(this.a.d.b.S),K(this.a.d.b.aa)]});C("WebGLEarth.prototype.setPosition",function(a,b,c){this.v.cancel();this.a.d.b.setPosition(J(a),J(b));w(c)&&this.a.d.r.setZoom(c)});C("WebGLEarth.prototype.getPosition",function(){return[K(this.a.d.b.S),K(this.a.d.b.aa)]});
C("WebGLEarth.prototype.setAltitude",function(a){this.v.cancel();xd(this.a.d.b,a)});C("WebGLEarth.prototype.getAltitude",function(){return this.a.d.b.w});C("WebGLEarth.prototype.setHeading",function(a){this.v.cancel();this.a.d.b.setHeading(J(a))});C("WebGLEarth.prototype.getHeading",function(){return K(this.a.d.b.getHeading())});C("WebGLEarth.prototype.setTilt",function(a){this.v.cancel();this.a.d.b.setTilt(J(a))});C("WebGLEarth.prototype.getTilt",function(){return K(this.a.d.b.getTilt())});
C("WebGLEarth.prototype.setRoll",function(a){this.v.cancel();this.a.d.b.Bb=J(a)});C("WebGLEarth.prototype.getRoll",function(){return K(this.a.d.b.Bb)});C("WebGLEarth.prototype.setZoom",function(a){this.v.cancel();this.a.d.r.setZoom(a)});C("WebGLEarth.prototype.getZoom",function(){return this.a.d.r.getZoom()});C("WebGLEarth.prototype.flyTo",function(a,b,c,d,e){De(this.v,J(a),J(b),c,d,e)});
C("WebGLEarth.prototype.flyToFitBounds",function(a,b,c,d){var a=J(a),b=J(b),c=J(c),d=J(d),e;e=this.a.wa;var f=(a+b)/2,f=be(f,c,f,d),g=be(a,0,b,0),i=Math.min(Math.max(this.a.Ua,f/g),1);e=J(K(e)/(i+0.4)-2);f=Math.max(g,f);f=Math.min(Math.PI/2,e+f/12756274);e=9567205.5*(Math.sin(f)*Math.sqrt(1+1/Math.pow(Math.tan(e),2))-1);c=I(c,2*Math.PI);d=I(d,2*Math.PI);f=c-d;f<-Math.PI?c+=2*Math.PI:f>Math.PI&&(d+=2*Math.PI);a=[(a+b)/2,(c+d)/2];De(this.v,a[0],a[1],Math.max(e,$d(this.a.d.r,this.a.d.r.A.oa()+0.1,a[0])))});
C("WebGLEarth.prototype.handleResize",function(){return this.a.cb()});C("WebGLEarth.Maps",{MAPQUEST:"mapquest",OSM:"osm",BING:"bing",WMS:"wms",GOOGLE:"gooogle",CUSTOM:"custom"});C("WebGLEarth.prototype.initMap",oc);C("WebGLEarth.prototype.setMap",$.prototype.setMap);C("WebGLEarth.prototype.setBaseMap",$.prototype.te);C("WebGLEarth.prototype.setOverlayMap",$.prototype.ve);C("WebGLEarth.prototype.on",$.prototype.le);C("WebGLEarth.prototype.off",$.prototype.cd);C("WebGLEarth.prototype.offAll",$.prototype.je);
C("WebGLEarth.prototype.initMarker",$.prototype.Od);C("WebGLEarth.Map",bc);C("WebGLEarth.Map.prototype.setBoundingBox",bc.prototype.rc);C("WebGLEarth.Map.prototype.setOpacity",bc.prototype.ue);C("WebGLEarth.Map.prototype.getOpacity",bc.prototype.Kd);C("WebGLEarth.Marker",ie);C("WebGLEarth.Marker.prototype.setPosition",function(a,b){this.lat=a;this.ub=b});
C("WebGLEarth.Marker.prototype.bindPopup",function(a,b,c){a=new xb(a,b,c);if(this.t)(b=this.t.t)&&b.parentNode&&b.parentNode.removeChild(b);this.t=a;this.element.appendChild(this.t.t);a.t.style.bottom=this.za.toFixed(0)+"px";return this});C("WebGLEarth.Marker.prototype.openPopup",function(){this.Db(!0)});C("WebGLEarth.Marker.prototype.closePopup",function(){this.Db(!1)});ie.prototype.yc=function(a){return A(function(b){b.target=this;b.latitude=this.lat;b.longitude=this.ub;a(b)},this)};
C("WebGLEarth.Marker.prototype.on",function(a,b){var c=T(this.element,a,this.yc(b));return b[z(this)+"___eventKey_"+a]=c});C("WebGLEarth.Marker.prototype.off",$.prototype.cd);C("WebGLEarth.Marker.prototype.offAll",function(a){Tc(this.element,a)});
